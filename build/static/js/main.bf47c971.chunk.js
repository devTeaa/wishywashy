(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(46),c=a.n(l),i=(a(56),a(10)),r=a(13),o=a(12),m=a(9),d=a(11),u=a(109),h=a(110),p=a(111),v=a(16),E=(a(62),a(64),a(66),a(36),a(108)),b=a(2),f=a.n(b),g=a(8);function N(e){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}var S=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".navbar-burger").addEventListener("click",function(e){e.target.classList.toggle("is-active"),document.querySelector(".navbar-menu").classList.toggle("is-active")}),document.querySelectorAll(".navbar-item").forEach(function(e){return e.addEventListener("click",function(){document.querySelector(".navbar-burger").classList.remove("is-active"),document.querySelector(".navbar-menu").classList.remove("is-active")})})}},{key:"render",value:function(){var e=this.props,t=e.admin,a=e.fetchLogout;return s.a.createElement("nav",{className:"navbar is-dark",role:"navigation","aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement(E.a,{className:"navbar-item",to:"/"},s.a.createElement("img",{src:"https://bulma.io/images/bulma-logo-white.png",alt:"company logo",width:"112",height:"28"})),s.a.createElement("span",{id:"menuButton",role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navMenu",onClick:this.toggleMenu},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{id:"navMenu",className:"navbar-menu"},s.a.createElement("div",{className:"navbar-start"},s.a.createElement(E.a,{className:"navbar-item",to:"/customers"},"Pelanggan"),s.a.createElement(E.a,{className:"navbar-item",to:"/transactions"},"Transaksi"),1===t?s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{className:"navbar-item",to:"/deposits",onClick:this.toggleMenu},"Paket Deposit"),s.a.createElement(E.a,{className:"navbar-item",to:"/services",onClick:this.toggleMenu},"Service"),s.a.createElement(E.a,{className:"navbar-item",to:"/items",onClick:this.toggleMenu},"Items"),s.a.createElement(E.a,{className:"navbar-item",to:"/report/transactions",onClick:this.toggleMenu},"Report")):s.a.createElement(s.a.Fragment,null)),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"navbar-item"},s.a.createElement("span",{className:"button is-danger",onClick:a},"Logout")))))}}]),t}(n.Component),y=Object(v.b)(null,{fetchLogout:function(){return function(e){document.cookie="login_state=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/",e({type:"LOGOUT_POST",payload:0})}}})(S),x=a(6),D=a(1),k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={isLoading:!1,username:null,password:null,error:!1},e.handleChange=e.handleChange.bind(Object(D.a)(Object(D.a)(e))),e.submitForm=e.submitForm.bind(Object(D.a)(Object(D.a)(e))),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.setLogin()}},{key:"componentWillMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"handleChange",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"submitForm",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,s,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0,error:!1}),a=this.state,n=a.username,s=a.password,l={username:n,password:s},e.next=6,this.props.fetchLogin(l);case 6:0!==!this.props.login&&this.mounted&&this.setState({isLoading:!1,error:!0});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.username,n=e.password,l=e.error;return s.a.createElement("section",{className:"hero is-dark has-text-white is-fullheight"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container has-text-centered"},s.a.createElement("div",{className:"column is-4-widescreen is-offset-4-widescreen is-6-desktop is-offset-3-desktop is-8-tablet is-offset-2-tablet"},s.a.createElement("h3",{className:"title"},"Login"),s.a.createElement("div",{className:"box"},s.a.createElement("form",{onSubmit:this.submitForm},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",name:"username",type:"text",placeholder:"Username...",autoFocus:!0,value:a||"",onChange:this.handleChange,autoComplete:"off"}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",name:"password",type:"password",placeholder:"Password...",value:n||"",onChange:this.handleChange})),s.a.createElement("p",{className:l?"help is-danger":"hidden"},"Wrong username or password")),s.a.createElement("button",{className:t?"button is-block is-primary is-fullwidth is-loading":"button is-block is-primary is-fullwidth",disabled:t},"Login")))))))}}]),t}(n.Component),C=Object(v.b)(function(e){return{login:e.login.item}},{fetchLogin:function(e){return function(){var t=Object(g.a)(f.a.mark(function t(a){var n,s;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(e){setTimeout(function(){return e()},1e3)});case 2:n=e.username,s=e.password,"admin"===n&&"admin123"===s?(document.cookie="login_state=1; max-age=".concat(604800,";samesite"),a({type:"LOGIN_POST",payload:1})):"staff"===n&&"staff123"===s?(document.cookie="login_state=2; max-age=".concat(604800,";samesite"),a({type:"LOGIN_POST",payload:2})):a({type:"LOGIN_POST",payload:0});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},setLogin:function(){return function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"1"!==N("login_state")&&"2"!==N("login_state")||t({type:"LOGIN_POST",payload:parseInt(N("login_state"))});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(k),O=(a(71),function(e){return s.a.createElement("svg",{height:e.s,width:e.s,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 505.4 505.4"},s.a.createElement("path",{d:"M437.1 233.45c14.8-10.4 24.6-27.7 24.6-47.2 0-31.9-25.8-57.7-57.7-57.7-31.9 0-57.7 25.8-57.7 57.7 0 19.5 9.7 36.8 24.6 47.2-12.7 4.4-24.3 11.2-34.1 20-13.5-11.5-29.4-20.3-46.8-25.5 21.1-12.8 35.3-36.1 35.3-62.6 0-40.4-32.7-73.1-73.1-73.1-40.4 0-73.1 32.8-73.1 73.1 0 26.5 14.1 49.8 35.3 62.6-17.2 5.2-32.9 13.9-46.3 25.2-9.8-8.6-21.2-15.3-33.7-19.6 14.8-10.4 24.6-27.7 24.6-47.2 0-31.9-25.8-57.7-57.7-57.7s-57.7 25.8-57.7 57.7c0 19.5 9.7 36.8 24.6 47.2-39.7 13.7-68.2 51.4-68.2 95.7v6.6c0 .2.2.4.4.4h122.3c-.7 5.5-1.1 11.2-1.1 16.9v6.8c0 29.4 23.8 53.2 53.2 53.2h155c29.4 0 53.2-23.8 53.2-53.2v-6.8c0-5.7-.4-11.4-1.1-16.9H505c.2 0 .4-.2.4-.4v-6.6c-.2-44.4-28.6-82.1-68.3-95.8zm-74.8-47.3c0-23 18.7-41.7 41.7-41.7s41.7 18.7 41.7 41.7c0 22.7-18.3 41.2-40.9 41.7h-1.6c-22.7-.4-40.9-18.9-40.9-41.7zm-167.4-20.8c0-31.5 25.6-57.1 57.1-57.1s57.1 25.6 57.1 57.1c0 30.4-23.9 55.3-53.8 57h-6.6c-29.9-1.7-53.8-26.6-53.8-57zm-135.6 20.8c0-23 18.7-41.7 41.7-41.7s41.7 18.7 41.7 41.7c0 22.7-18.3 41.2-40.9 41.7h-1.6c-22.6-.4-40.9-18.9-40.9-41.7zm66.2 134H16.2c4.5-42.6 40.5-76 84.2-76.3h1.2c20.8.1 39.8 7.8 54.5 20.3-14.4 15.6-25.1 34.8-30.6 56zm241.3 39.8c0 20.5-16.7 37.2-37.2 37.2h-155c-20.5 0-37.2-16.7-37.2-37.2v-6.8c0-62.1 49.6-112.9 111.3-114.7 1.1.1 2.3.1 3.4.1s2.3 0 3.4-.1c61.7 1.8 111.3 52.6 111.3 114.7v6.8zm11.9-39.8c-5.5-21.1-16-40-30.3-55.6 14.8-12.8 34-20.5 55-20.7h1.2c43.7.3 79.7 33.7 84.2 76.3H378.7z"}))}),I=function(e){return s.a.createElement("svg",{height:e.s,width:e.s,fill:"currentColor",viewBox:"-43 0 512 512",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("path",{d:"M384 0H42.668C19.113.027.028 19.113 0 42.668v409.598c0 14.14 11.46 25.601 25.602 25.601v25.598a8.533 8.533 0 0 0 8.53 8.535h358.403c4.711 0 8.531-3.82 8.531-8.535v-25.598c14.137 0 25.602-11.46 25.602-25.601V42.668C426.637 19.113 407.555.028 384 0zM42.668 17.066H384c14.137 0 25.602 11.461 25.602 25.602v59.734H17.066V42.668c0-14.14 11.461-25.602 25.602-25.602zM384 494.934H42.668v-17.067H384zm17.066-34.133H25.602a8.534 8.534 0 0 1-8.536-8.535V119.465h392.536v332.8a8.534 8.534 0 0 1-8.536 8.536zm0 0"}),s.a.createElement("path",{d:"M42.668 85.332h102.398a8.533 8.533 0 0 0 8.536-8.531V42.668a8.534 8.534 0 0 0-8.536-8.535H42.668a8.534 8.534 0 0 0-8.535 8.535v34.133c0 4.71 3.82 8.531 8.535 8.531zm8.531-34.133h85.336v17.067H51.2zm0 0M196.266 85.332c14.14 0 25.601-11.46 25.601-25.598 0-14.14-11.46-25.601-25.601-25.601-14.137 0-25.598 11.46-25.598 25.601 0 14.137 11.46 25.598 25.598 25.598zm0-34.133a8.534 8.534 0 1 1 .002 17.068 8.534 8.534 0 0 1-.002-17.068zm0 0M264.531 85.332c14.14 0 25.602-11.46 25.602-25.598 0-14.14-11.461-25.601-25.602-25.601-14.136 0-25.597 11.46-25.597 25.601 0 14.137 11.46 25.598 25.597 25.598zm0-34.133a8.534 8.534 0 1 1 .003 17.068 8.534 8.534 0 0 1-.003-17.068zm0 0M315.734 68.266h17.067c4.71 0 8.531-3.82 8.531-8.532a8.533 8.533 0 0 0-8.531-8.535h-17.067a8.534 8.534 0 1 0 0 17.067zm0 0M366.934 68.266H384a8.533 8.533 0 1 0 0-17.067h-17.066a8.534 8.534 0 1 0 0 17.067zm0 0M213.332 153.602c-75.402 0-136.531 61.125-136.531 136.53s61.129 136.536 136.531 136.536c75.406 0 136.535-61.129 136.535-136.535-.09-75.367-61.164-136.442-136.535-136.531zm0 256c-65.977 0-119.465-53.489-119.465-119.47 0-65.98 53.488-119.464 119.465-119.464 65.98 0 119.469 53.484 119.469 119.465-.07 65.949-53.516 119.398-119.469 119.469zm0 0"}),s.a.createElement("path",{d:"M213.332 179.2c-61.203-.06-110.871 49.507-110.934 110.71a110.89 110.89 0 0 0 8.34 42.285c.051.172 0 .348.067.52.07.172.23.332.316.531 23.766 56.418 88.77 82.887 145.188 59.121a110.859 110.859 0 0 0 64.058-73.543c.047-.14.082-.285.11-.43 15.847-58.937-19.086-119.562-78.028-135.406a110.514 110.514 0 0 0-29.117-3.789zm0 17.066c51.719-.121 93.746 41.707 93.867 93.422a93.626 93.626 0 0 1-2.277 20.753 131.727 131.727 0 0 0-13.082 5.122 77.43 77.43 0 0 1-35.84 8.703 57.637 57.637 0 0 1-30.32-7.68 74.545 74.545 0 0 0-37.946-9.387 224.164 224.164 0 0 0-63.625 11.946c-16.086-49.22 10.774-102.157 59.993-118.239a93.698 93.698 0 0 1 29.23-4.64zm0 187.734c-34.398-.023-66.035-18.852-82.465-49.074a203.32 203.32 0 0 1 56.867-10.66 57.651 57.651 0 0 1 30.317 7.68A74.53 74.53 0 0 0 256 341.331a92.057 92.057 0 0 0 41.328-9.547c-15.816 31.938-48.355 52.168-83.996 52.215zm0 0"}))},j=function(e){return s.a.createElement("svg",{height:e.s,width:e.s,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469.341 469.341"},s.a.createElement("path",{d:"M448.004 236.639v-65.965c0-22.368-17.35-40.559-39.271-42.323l-61.26-107c-5.677-9.896-14.844-16.969-25.813-19.906-10.917-2.917-22.333-1.385-32.104 4.302L79.553 128.007H42.67c-23.531 0-42.667 19.135-42.667 42.667v256c0 23.531 19.135 42.667 42.667 42.667h362.667c23.531 0 42.667-19.135 42.667-42.667v-65.965c12.389-4.418 21.333-16.147 21.333-30.035v-64c0-13.888-8.944-25.617-21.333-30.035zm-64.06-108.632h-92.971l69.729-40.596 23.242 40.596zm-33.841-59.109l-101.529 59.109h-42.113l133.112-77.5 10.53 18.391zm-49.808-44.714c4.823-2.823 10.458-3.573 15.844-2.135 5.448 1.458 9.99 4.979 12.813 9.906l.022.039-164.91 96.013h-42.111L300.295 24.184zm126.375 402.49c0 11.76-9.573 21.333-21.333 21.333H42.67c-11.76 0-21.333-9.573-21.333-21.333v-256c0-11.76 9.573-21.333 21.333-21.333h362.667c11.76 0 21.333 9.573 21.333 21.333v64h-64c-35.292 0-64 28.708-64 64s28.708 64 64 64h64v64zm21.334-96c0 5.885-4.781 10.667-10.667 10.667H362.67c-23.531 0-42.667-19.135-42.667-42.667 0-23.531 19.135-42.667 42.667-42.667h74.667c5.885 0 10.667 4.781 10.667 10.667v64z"}),s.a.createElement("path",{d:"M362.67 277.341c-11.76 0-21.333 9.573-21.333 21.333 0 11.76 9.573 21.333 21.333 21.333 11.76 0 21.333-9.573 21.333-21.333.001-11.76-9.572-21.333-21.333-21.333z"}))},w=function(e){return s.a.createElement("svg",{height:e.s,width:e.s,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56.414 56.414"},s.a.createElement("path",{d:"M56.414 11.089L45.299 0H31.295l-5.519 5.501C12.053 4.356.988 12.076.833 12.187a1 1 0 1 0 1.162 1.626c.139-.099 9.712-6.776 21.881-6.419L5.999 25.213l.008.008L0 31.213l25.146 25.201 10.04-10.013c2.062 1.08 4.461 1.611 6.834 1.61 3.501 0 6.935-1.138 9.101-3.304 7.367-7.368 4.443-15.45 3.443-17.633l1.849-1.845v-14.14zM44.473 2l9.941 9.919v12.48L34.876 43.873c-4.084-2.928-5.327-8.422-3.493-15.626a1 1 0 0 0-.722-1.216.994.994 0 0 0-1.216.722c-2.589 10.167.89 15.181 3.999 17.547l-2.293 2.286L8.836 25.224 26.516 7.59c4.198.48 8.631 1.866 13.046 4.667a3.886 3.886 0 0 0-.068.678c0 2.17 1.765 3.935 3.935 3.935s3.936-1.765 3.936-3.935S45.599 9 43.429 9c-1.216 0-2.291.566-3.013 1.436-4.089-2.557-8.187-3.982-12.118-4.622L32.121 2h12.352zm-2.659 11.8a.997.997 0 0 0 1.399-.2.998.998 0 0 0-.2-1.399c-.309-.231-.619-.435-.928-.652A1.923 1.923 0 0 1 43.429 11c1.067 0 1.936.868 1.936 1.936a1.938 1.938 0 0 1-1.936 1.935 1.938 1.938 0 0 1-1.785-1.19c.057.041.114.076.17.119zM2.828 31.217l4.592-4.58 22.322 22.37-4.592 4.58-22.322-22.37zm46.879 12.076c-2.576 2.574-8.37 3.748-13.03 1.621l16.375-16.332c.995 2.476 2.605 8.76-3.345 14.711z"}))},M=function(e){return s.a.createElement("svg",{height:e.s,width:e.s,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496.004 496.004"},s.a.createElement("path",{d:"M493.661 178.346l-80-80a8.001 8.001 0 0 0-4.224-2.208l-88-16a8 8 0 0 0-9.432 7.864 47.493 47.493 0 0 1-.68 7.584l-55.32-13.824v-2.56c21.645-4.418 35.61-25.547 31.192-47.192C282.779 10.365 261.65-3.6 240.005.818c-18.621 3.801-31.996 20.179-32 39.184h16c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24a8 8 0 0 0-8 8v9.752l-55.32 13.832a47.493 47.493 0 0 1-.68-7.584 8 8 0 0 0-2.872-6.144 7.813 7.813 0 0 0-6.56-1.72l-88 16a8.001 8.001 0 0 0-4.224 2.208l-80 80a8 8 0 0 0 0 11.312l64 64a8 8 0 0 0 11.312 0l18.344-18.344v52.688h-56C17.98 287.938.074 305.742.01 327.767a39.876 39.876 0 0 0 16.243 32.235C-1.42 372.915-5.279 397.71 7.635 415.383a39.618 39.618 0 0 0 8.618 8.618c-17.739 13.054-21.537 38.018-8.483 55.757a39.885 39.885 0 0 0 32.235 16.243h288a8 8 0 0 0 5.656-2.344l64-64a7.925 7.925 0 0 0 2.272-5.656h.072V235.314l18.344 18.344a8 8 0 0 0 11.312 0l64-64a8 8 0 0 0 0-11.312zM248.005 96.242l58.176 14.544a65.272 65.272 0 0 1-58.176 32.216 65.272 65.272 0 0 1-58.176-32.216l58.176-14.544zm-232 231.76c0-13.255 10.745-24 24-24h176c13.255 0 24 10.745 24 24s-10.745 24-24 24h-176c-13.255 0-24-10.746-24-24zm0 64c0-13.255 10.745-24 24-24h176c13.255 0 24 10.745 24 24s-10.745 24-24 24h-176c-13.255 0-24-10.746-24-24zm200 88h-176c-13.255 0-24-10.745-24-24s10.745-24 24-24h176c13.255 0 24 10.745 24 24s-10.745 24-24 24zm120-11.312v-36.688h36.688l-36.688 36.688zm88-232l-50.344-50.344-11.312 11.312 21.656 21.656v196.688h-56a8 8 0 0 0-8 8v56h-72.208c13.315-17.25 10.126-42.027-7.123-55.343a37.764 37.764 0 0 0-.877-.657c17.673-12.913 21.532-37.708 8.619-55.382a39.6 39.6 0 0 0-8.619-8.618c17.74-13.054 21.538-38.018 8.483-55.757a39.882 39.882 0 0 0-32.275-16.243h-104v-68.688l21.656-21.656-11.312-11.312-50.344 50.344-52.688-52.688 72.576-72.576 76.8-13.96c5.232 34.688 38.8 61.536 79.296 61.536 40.496 0 74.064-26.848 79.296-61.536l76.8 13.96 72.608 72.576-52.688 52.688z"}),s.a.createElement("path",{d:"M32.005 320.002h192v16h-192zM32.005 384.002h184v16h-184zM32.005 448.002h184v16h-184z"}))},L=function(e){return s.a.createElement("svg",{height:e.s,width:e.s,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 60 60"},s.a.createElement("path",{d:"M38.914 0H6.5v60h47V14.586L38.914 0zm.586 3.414L50.086 14H39.5V3.414zM8.5 58V2h29v14h14v42h-43z"}),s.a.createElement("path",{d:"M16.5 17h9a1 1 0 1 0 0-2h-9a1 1 0 1 0 0 2zM33.5 37h-17a1 1 0 1 0 0 2h17a1 1 0 1 0 0-2zM43.5 30h-7a1 1 0 1 0 0 2h7a1 1 0 1 0 0-2zM16.5 25h5a1 1 0 1 0 0-2h-5a1 1 0 1 0 0 2zM31.5 25h7a1 1 0 1 0 0-2h-7a1 1 0 1 0 0 2zM25.5 24c0 .26.11.52.29.71.19.18.45.29.71.29.26 0 .52-.11.71-.29.18-.19.29-.45.29-.71 0-.261-.11-.521-.29-.71-.37-.37-1.04-.37-1.42 0-.18.189-.29.449-.29.71zM21.5 30a1 1 0 1 0 0 2h10a1 1 0 1 0 0-2h-10zM16.5 32c.26 0 .52-.11.71-.29.18-.19.29-.45.29-.71 0-.261-.11-.521-.29-.71-.37-.37-1.05-.37-1.42 0-.18.189-.29.439-.29.71 0 .26.11.52.29.71.19.18.45.29.71.29zM43.5 44h-7a1 1 0 1 0 0 2h7a1 1 0 1 0 0-2zM31.5 44h-10a1 1 0 1 0 0 2h10a1 1 0 1 0 0-2zM15.79 44.29a1.013 1.013 0 0 0 0 1.42c.19.18.45.29.71.29.27 0 .52-.11.71-.29.18-.19.29-.45.29-.71a.987.987 0 0 0-.29-.7c-.37-.38-1.04-.38-1.42-.01zM42.79 23.29c-.18.189-.29.449-.29.71 0 .26.11.52.29.71.19.18.45.29.71.29.26 0 .52-.11.71-.29.19-.19.29-.45.29-.71 0-.261-.1-.521-.29-.71-.38-.37-1.04-.37-1.42 0zM39.21 38.71c.18-.19.29-.45.29-.71 0-.261-.11-.521-.29-.71-.38-.37-1.05-.37-1.42 0-.18.189-.29.449-.29.71 0 .26.11.52.29.71.19.189.44.29.71.29s.52-.11.71-.29zM42.79 37.29c-.18.189-.29.449-.29.71 0 .26.11.52.29.71.19.18.44.29.71.29s.52-.11.71-.29c.18-.19.29-.45.29-.71 0-.261-.11-.521-.29-.71-.37-.37-1.05-.37-1.42 0z"}))},Y=Object(v.b)(function(e){return{login:e.login.item}})(function(e){return s.a.createElement("div",{className:"grid-home"},s.a.createElement("div",{className:"card card-blue card-no-border"},s.a.createElement("div",{className:"card-content has-text-centered"},s.a.createElement(E.a,{className:"title",to:"/customers"},s.a.createElement(O,{s:"6rem"}))),s.a.createElement("footer",{className:"card-footer"},s.a.createElement("div",{className:"card-footer-item"},s.a.createElement(E.a,{to:"/customers"},"Pelanggan")),s.a.createElement("div",{className:"card-footer-item"},s.a.createElement(E.a,{to:"/customers/add"},"Tambah baru")))),s.a.createElement("div",{className:"card card-yellow card-no-border"},s.a.createElement("div",{className:"card-content has-text-centered"},s.a.createElement(E.a,{className:"title",to:"/transactions"},s.a.createElement(I,{s:"5rem"}))),s.a.createElement("footer",{className:"card-footer"},s.a.createElement("div",{className:"card-footer-item"},s.a.createElement(E.a,{to:"/transactions"},"Transaksi")),s.a.createElement("div",{className:"card-footer-item"},s.a.createElement(E.a,{to:"/transactions/add"},"Tambah Baru")))),1===e.login?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"card card-red card-no-border"},s.a.createElement("div",{className:"card-content has-text-centered"},s.a.createElement(E.a,{className:"title",to:"/deposits"},s.a.createElement(j,{s:"5rem"}))),s.a.createElement("footer",{className:"card-footer"},s.a.createElement("div",{className:"card-footer-item"},s.a.createElement(E.a,{to:"/deposits"},"List Paket Deposit")))),s.a.createElement("div",{className:"card card-green card-no-border"},s.a.createElement("div",{className:"card-content has-text-centered"},s.a.createElement(E.a,{className:"title",to:"/services"},s.a.createElement(w,{s:"5rem"}))),s.a.createElement("footer",{className:"card-footer"},s.a.createElement("div",{className:"card-footer-item"},s.a.createElement(E.a,{to:"/services"},"Jenis layanan")))),s.a.createElement("div",{className:"card card-turqoise card-no-border"},s.a.createElement("div",{className:"card-content has-text-centered"},s.a.createElement(E.a,{className:"title",to:"/items"},s.a.createElement(M,{s:"5rem"}))),s.a.createElement("footer",{className:"card-footer"},s.a.createElement("div",{className:"card-footer-item"},s.a.createElement(E.a,{to:"/items"},"Items")))),s.a.createElement("div",{className:"card card-violet card-no-border"},s.a.createElement("div",{className:"card-content has-text-centered"},s.a.createElement(E.a,{className:"title",to:"/items"},s.a.createElement(L,{s:"5rem"}))),s.a.createElement("footer",{className:"card-footer"},s.a.createElement("div",{className:"card-footer-item"},s.a.createElement(E.a,{to:"/report/transactions"},"Reports"))))):s.a.createElement(s.a.Fragment,null))}),P=a(7),T=a.n(P),A=a(4),z=a.n(A),F=a(5),R=a.n(F),H="https://wishywashy-server.herokuapp.com",q=(a(92),function(){return s.a.createElement("div",{className:"loading-container"},s.a.createElement("div",{className:"loading"},"Loading"))}),B=function(e){return s.a.createElement("svg",{height:e.s,width:e.s,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56.966 56.966"},s.a.createElement("path",{d:"M55.146 51.887L41.588 37.786A22.926 22.926 0 0 0 46.984 23c0-12.682-10.318-23-23-23s-23 10.318-23 23 10.318 23 23 23c4.761 0 9.298-1.436 13.177-4.162l13.661 14.208c.571.593 1.339.92 2.162.92.779 0 1.518-.297 2.079-.837a3.004 3.004 0 0 0 .083-4.242zM23.984 6c9.374 0 17 7.626 17 17s-7.626 17-17 17-17-7.626-17-17 7.626-17 17-17z"}))},U=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={isLoading:!1,pagingState:0,pagingMax:0,searchCustomer:"",searchExpiring:!1,customerList:[]},e.handleChange=e.handleChange.bind(Object(D.a)(Object(D.a)(e))),e.handleSelect=e.handleSelect.bind(Object(D.a)(Object(D.a)(e))),e.submitSearch=e.submitSearch.bind(Object(D.a)(Object(D.a)(e))),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchCustomer()}},{key:"fetchCustomer",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n,s,l,c,i,r,o,m,d=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:"",a=d.length>1&&void 0!==d[1]&&d[1],n=d.length>2&&void 0!==d[2]?d[2]:null,this.setState({isLoading:!0,customerList:[]}),e.prev=4,s=this.state,l=s.pagingState,c=s.pagingMax,i=[],l="next"===n?l+1:"prev"===n?l-1:1,""!==t||!1!==a){e.next=16;break}return e.next=11,T.a.get("".concat(H,"/customers/?page=",1)).then(function(e){return e.data});case 11:r=e.sent,i=r.results,c=r.pages,e.next=23;break;case 16:return o="",a&&(o=z()().add(7,"days").hours(0).minutes(0).seconds(0).milliseconds(0).format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]")),e.next=20,T.a.get("".concat(H,"/customers/search?value=").concat(t,"&expiration_date=").concat(o,"&page=").concat(l)).then(function(e){return e.data});case 20:m=e.sent,i=m.results,c=m.pages;case 23:i.forEach(function(e){e.almost_expire=!!z()().isAfter(z()(e.expiration_date,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").subtract(7,"days"))}),this.setState({customerList:i,pagingState:l,pagingMax:c}),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(4),console.log(e.t0);case 30:this.setState({isLoading:!1});case 31:case"end":return e.stop()}},e,this,[[4,27]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleSelect",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"submitSearch",value:function(e){e.preventDefault();var t=this.state,a=t.searchCustomer,n=t.searchExpiring;this.fetchCustomer(a,JSON.parse(n))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.pagingState,l=t.pagingMax,c=t.searchCustomer,i=t.searchExpiring,r=t.customerList;return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Search by name, alamat, no hp"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input",type:"text",name:"searchCustomer",placeholder:"...",onChange:this.handleChange,value:c||""}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fas fa-search"})))),s.a.createElement("div",{className:"column is-4"},s.a.createElement("label",{className:"label"},"Filter expiration date"),s.a.createElement("span",{className:"select is-expanded"},s.a.createElement("select",{name:"searchExpiring","data-type":"bool",value:i||"",onChange:this.handleSelect},s.a.createElement("option",{value:"false"},"Semua"),s.a.createElement("option",{value:"true"},"Expiring")))),s.a.createElement("div",{className:"column is-narrow flex flex-align-end"},s.a.createElement("button",{className:"button is-primary",onClick:function(t){return e.submitSearch(t)}},"Search"))),s.a.createElement("div",{className:a?"":"scrollable-table-div"},s.a.createElement("table",{className:a?"table is-fullwidth has-actions":"table is-fullwidth is-hoverable has-actions"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Nama"),s.a.createElement("th",null,"Alamat"),s.a.createElement("th",null,"No HP"),s.a.createElement("th",null,"Saldo"),s.a.createElement("th",null,"Expiration Date"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,0===r.length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"6",className:"has-text-centered"},a?s.a.createElement(q,null):"No data available")):r.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.name),s.a.createElement("td",null,e.address),s.a.createElement("td",null,e.mobile),s.a.createElement("td",null,R()(e.balance).format("0,0")),s.a.createElement("td",null,e.expiration_date?s.a.createElement("span",{className:e.almost_expire?"tag is-warning":"tag is-success"},z()(e.expiration_date,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD MMM YYYY")):s.a.createElement("span",{className:"tag is-danger"},"No Deposit")),s.a.createElement("td",null,s.a.createElement(E.a,{to:"/customers/".concat(e.id),className:"button is-info m-r-1"},s.a.createElement(B,{s:"14px"}))))})),s.a.createElement("tfoot",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"6"},s.a.createElement("div",{className:"pagination is-right",role:"navigation","aria-label":"pagination"},s.a.createElement("span",{className:r.length>0&&n>1?"pagination-previous":"pagination-previous invisible",onClick:function(){return e.fetchCustomer(null,null,"prev")}},"Previous page"),s.a.createElement("span",{className:r.length>0&&n!==l?"pagination-next":"pagination-next invisible",onClick:function(){return e.fetchCustomer(null,null,"next")}},"Next page"))))))))}}]),t}(n.Component),Q=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-narrow"},s.a.createElement(E.a,{to:"/customers/add",className:"button is-primary"},"Add Customer"))),s.a.createElement(U,null))},K=RegExp("^[1-9][0-9]*[.]?[0-9]*$"),J=RegExp("^\\+?\\d+$"),V=RegExp(".+"),W=a(33),Z=function(e){function t(){var e;Object(i.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=Object(o.a)(this,Object(m.a)(t).call(this,n))).name="ValidationError",e.errorList=n[0],e}return Object(d.a)(t,e),t}(Object(W.a)(Error)),X=function(e){function t(){var e;Object(i.a)(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=Object(o.a)(this,Object(m.a)(t).call(this,n))).name="MessageError",e}return Object(d.a)(t,e),t}(Object(W.a)(Error));function G(){document.getElementById("errorMessage").classList.toggle("now-visible"),setTimeout(function(){try{document.getElementById("errorMessage").classList.remove("now-visible")}catch(e){}},2e3)}var _=function(e){var t=e.errorList;return s.a.createElement("article",{id:"errorMessage",className:"message is-danger toggle-invisible"},s.a.createElement("div",{className:"message-header"},s.a.createElement("strong",null,"Error:")),s.a.createElement("div",{className:"message-body"},s.a.createElement("ul",null,t.map(function(e,t){return s.a.createElement("li",{key:t},e)}))))};function $(e){document.getElementById("successMessage").querySelector(".message-body").innerHTML="<ul><li>".concat(e,"</li></ul>"),document.getElementById("successMessage").classList.toggle("now-visible"),setTimeout(function(){try{document.getElementById("successMessage").classList.remove("now-visible")}catch(e){}},2e3)}var ee=function(e){return s.a.createElement("article",{id:"successMessage",className:"message is-success toggle-invisible"},s.a.createElement("div",{className:"message-header"},s.a.createElement("strong",null,"Sukses:")),s.a.createElement("div",{className:"message-body"}))},te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={depositList:[],isLoading:!1,isRequesting:!1,errorList:[],customerName:null,customerAddress:null,customerCity:null,customerMobile:null,customerDepositAmount:0,customerHistory:[],selectedDepositId:null,selectedDepositName:null,selectedDepositPrice:null,selectedDepositAmount:null},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.handleSelect=a.handleSelect.bind(Object(D.a)(Object(D.a)(a))),a.submitCustomer=a.submitCustomer.bind(Object(D.a)(Object(D.a)(a))),a.deleteCustomer=a.deleteCustomer.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),void 0===this.props.match.params.id){e.next=6;break}return e.next=4,T.a.get("".concat(H,"/customers/").concat(this.props.match.params.id)).then(function(e){return e.data});case 4:t=e.sent,this.setState({customerName:t.name,customerAddress:t.address,customerCity:t.city,customerMobile:t.mobile,customerDepositAmount:t.balance,customerHistory:t.history});case 6:return(a=this.state.depositList).push({depositId:0,depositName:"-Pilih paket--",depositPrice:0,depositAmount:0}),e.next=10,T.a.get("".concat(H,"/deposits")).then(function(e){return e.data});case 10:e.sent.forEach(function(e){a.push({depositId:e.id,depositName:e.name,depositPrice:e.price,depositAmount:e.amount})}),this.setState({isLoading:!1,depositList:a});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){"checkbox"===e.target.type?this.setState(Object(x.a)({},e.target.name,e.target.checked)):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleSelect",value:function(e){if(this.setState(Object(x.a)({},e.target.name,e.target.value)),"selectedDepositName"===e.target.name&&""!==e.target.value){var t=this.state,a=t.selectedDepositId,n=t.selectedDepositPrice,s=t.selectedDepositAmount,l=t.depositList,c=t.customerDepositAmount;c-=s;var i=l[e.target.options.selectedIndex];a=i.depositId,n=i.depositPrice,s=i.depositAmount,c+=i.depositAmount,this.setState({selectedDepositId:a,selectedDepositPrice:n,selectedDepositAmount:s,customerDepositAmount:c})}}},{key:"submitCustomer",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,s,l,c,i,r,o,m,d=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isRequesting:!0}),e.prev=2,a=this.state,n=a.customerName,s=a.customerAddress,l=a.customerCity,c=a.customerMobile,i=a.selectedDepositId,r=[],V.test(n||"")||r.push("Nama harus diisi"),V.test(s||"")||r.push("Alamat harus di isi"),J.test(c||"")||r.push("Nomor hp harus diisi"),V.test(l||"")||r.push("Kota harus diisi"),!(r.length>0)){e.next=11;break}throw new Z(r);case 11:if(o={id:this.props.match.params.id,name:n,address:s,city:l,mobile:c,depositId:i},void 0===this.props.match.params.id){e.next=18;break}return e.next=15,T.a.put("".concat(H,"/customers/").concat(this.props.match.params.id),o);case 15:$("Customer berhasil diubah"),e.next=21;break;case 18:return e.next=20,T.a.post("".concat(H,"/customers"),o);case 20:$("Customer berhasil ditambahkan");case 21:setTimeout(function(){d.props.history.push("/customers")},2e3),e.next=30;break;case 24:e.prev=24,e.t0=e.catch(2),m=[],e.t0.response?m.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?m.push("Request Timeout"):e.t0 instanceof Z&&(m=e.t0.errorList),this.setState({errorList:m}),G();case 30:this.setState({isRequesting:!1});case 31:case"end":return e.stop()}},e,this,[[2,24]])}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isRequesting:!0}),e.prev=2,window.confirm("Konfirmasi hapus customer?")){e.next=5;break}throw X("Batal hapus customer");case 5:if(null===this.props.match.params.id||void 0===this.props.match.params.id){e.next=10;break}return e.next=8,T.a.delete("".concat(H,"/customers/").concat(this.props.match.params.id));case 8:$("Customer berhasil dihapus"),setTimeout(function(){n.props.history.push("/customers")},2e3);case 10:e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),a=this.state.errorList,e.t0.response?a.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?a.push("Request Timeout"):e.t0 instanceof X&&a.push(e.t0.message),this.setState({errorList:a}),G();case 18:this.setState({isRequesting:!1});case 19:case"end":return e.stop()}},e,this,[[2,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.depositList,n=t.isLoading,l=t.isRequesting,c=t.errorList,i=t.customerName,r=t.customerAddress,o=t.customerCity,m=t.customerMobile,d=t.customerDepositAmount,u=t.customerHistory,h=t.selectedDepositName,p=t.selectedDepositPrice,v=t.selectedDepositAmount,b=a.map(function(e,t){return s.a.createElement("option",{key:t,value:e.depositName},e.depositName)});return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee,null),s.a.createElement(_,{errorList:c}),s.a.createElement("form",null,s.a.createElement("div",{className:"columns flex flex-justify-end"},s.a.createElement("button",{className:l?"button is-primary m-r-1 is-loading":"button is-primary m-r-1",onClick:function(t){return e.submitCustomer(t)},disabled:l},void 0===this.props.match.params.id?"Submit":"Update"),s.a.createElement("p",{className:null!==this.props.match.params.id&&void 0!==this.props.match.params.id?"control":"hidden"},s.a.createElement("button",{className:l?"button is-danger m-r-1 is-loading":"button is-danger m-r-1",onClick:function(t){return e.deleteCustomer(t)},disabled:l},"Delete")),s.a.createElement(E.a,{to:"/customers",className:l?"button is-loading":"button"},"Cancel")),s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Nama"),s.a.createElement("div",{className:n?"control is-loading":"control"},s.a.createElement("input",{className:"input",name:"customerName",type:"text",placeholder:"Masukkan nama...",value:i||"",onChange:this.handleChange,disabled:n}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Alamat"),s.a.createElement("div",{className:n?"control is-loading":"control"},s.a.createElement("input",{className:"input",name:"customerAddress",type:"text",placeholder:"Masukkan alamat...",value:r||"",onChange:this.handleChange,disabled:n}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Kota"),s.a.createElement("div",{className:n?"control is-loading":"control"},s.a.createElement("input",{className:"input",type:"text",name:"customerCity",placeholder:"Masukkan kota...",value:o||"",onChange:this.handleChange,disabled:n}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"No HP"),s.a.createElement("div",{className:n?"control is-loading":"control"},s.a.createElement("input",{className:"input",type:"text",name:"customerMobile",placeholder:"0812, +6221987",value:m||"",onChange:this.handleChange,disabled:n})))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"field columns"},s.a.createElement("div",{className:"field column"},s.a.createElement("label",{className:"label"},"Jenis Paket"),s.a.createElement("div",{className:"field"},s.a.createElement("span",{className:n?"select is-expanded is-loading":"select is-expanded"},s.a.createElement("select",{name:"selectedDepositName",value:h||"",onChange:this.handleSelect,disabled:n},b)))),s.a.createElement("div",{className:"field column"},s.a.createElement("label",{className:"label"},"Harga Paket"),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"Rp")),s.a.createElement("p",{className:"control"},s.a.createElement("input",{type:"text",className:"input",value:R()(p).format("0,0")||"",readOnly:!0})))),s.a.createElement("div",{className:"field column"},s.a.createElement("label",{className:"label"},"Saldo Paket"),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"+")),s.a.createElement("p",{className:"control"},s.a.createElement("input",{type:"text",className:"input",value:R()(v).format("0,0")||"",readOnly:!0}))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Saldo Akhir"),s.a.createElement("div",{className:"field"},s.a.createElement("input",{type:"text",className:"input",value:R()(d).format("0,0")||0,readOnly:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("table",{className:"table is-fullwidth"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Tanggal Expired"),s.a.createElement("th",null,"Balance Expired"))),s.a.createElement("tbody",null,u.map(function(e){return s.a.createElement("tr",{key:e.expirationDate},s.a.createElement("td",null,z()(e.expirationDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD MMM YYYY")),s.a.createElement("td",null,R()(e.expirationBalance).format("0,0")))}))))))))}}]),t}(n.Component),ae=(a(28),a(23)),ne=a.n(ae),se=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={isLoading:!1,errorList:[],pagingState:0,pagingMax:0,searchInvoiceId:"",searchDateMode:"false",searchDateStart:null,searchDateEnd:null,searchCustomerId:"",searchCustomerName:"",searchUseDeposit:"",searchIsPaid:"",searchIsComplete:"",transactionList:[]},e.handleChange=e.handleChange.bind(Object(D.a)(Object(D.a)(e))),e.handleSelect=e.handleSelect.bind(Object(D.a)(Object(D.a)(e))),e.handleDelete=e.handleDelete.bind(Object(D.a)(Object(D.a)(e))),e.submitSearch=e.submitSearch.bind(Object(D.a)(Object(D.a)(e))),e.clearForm=e.clearForm.bind(Object(D.a)(Object(D.a)(e))),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchTransaction(),this.setState({searchDateEnd:z()().format("YYYY-MM-DD")});ne.a.attach('[type="date"]',{displayMode:"dialog",showHeader:!1,showFooter:!1,dateFormat:"YYYY-MM-DD"}).forEach(function(t){t.on("date:selected",function(){t.target=t.element,e.handleChange(t)})})}},{key:"fetchTransaction",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n,s,l,c,i,r,o,m=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:null,a=m.length>1&&void 0!==m[1]?m[1]:null,this.setState({isLoading:!0,transactionList:[]}),e.prev=3,n=this.state,s=n.transactionList,l=n.pagingState,c=n.pagingMax,l="next"===a?l+1:"prev"===a?l-1:1,null===t){e.next=14;break}return e.next=9,T.a.post("".concat(H,"/transactions/search?page=").concat(l),t).then(function(e){return e.data});case 9:i=e.sent,s=i.results,c=i.pages,e.next=19;break;case 14:return e.next=16,T.a.get("".concat(H,"/transactions/?page=").concat(l)).then(function(e){return e.data});case 16:r=e.sent,s=r.results,c=r.pages;case 19:this.setState({transactionList:s,pagingState:l,pagingMax:c}),e.next=28;break;case 22:e.prev=22,e.t0=e.catch(3),o=[],e.t0.response?o.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request&&o.push("Request Timeout"),this.setState({errorList:o}),G();case 28:this.setState({isLoading:!1});case 29:case"end":return e.stop()}},e,this,[[3,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){"checkbox"===e.target.type?this.setState(Object(x.a)({},e.target.name,e.target.checked)):"number"===e.target.type?this.setState(Object(x.a)({},e.target.name,parseFloat(e.target.value))):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleSelect",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleDelete",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to delete this invoice?")){e.next=14;break}return e.prev=1,e.next=4,T.a.delete("".concat(H,"/transactions/").concat(t));case 4:$("Transaksi berhasil dihapus"),this.fetchTransaction(),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),a=[],e.t0.response?a.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request&&a.push("Request Timeout"),this.setState({errorList:a}),G();case 14:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"submitSearch",value:function(e){e.preventDefault();var t=this.state,a=t.searchInvoiceId,n=t.searchDateMode,s=t.searchDateStart,l=t.searchDateEnd,c=t.searchCustomerId,i=t.searchCustomerName,r=t.searchUseDeposit,o=t.searchIsPaid,m=t.searchIsComplete;s=s?z()(s,"YYYY-MM-DD").format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]"):null,l=l?z()(l,"YYYY-MM-DD").format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]"):null;var d={invoiceId:""===a?null:parseInt(a),invoiceDateStart:"received"===n?s:null,invoiceDateEnd:"received"===n?l:null,invoiceFinishedStart:"finished"===n?s:null,invoiceFinishedEnd:"finished"===n?l:null,customerId:""===c?null:parseInt(c),customerName:""===i?null:i,useDeposit:""===r?null:JSON.parse(r),isPaid:""===o?null:JSON.parse(o),isComplete:""===m?null:JSON.parse(m)};this.fetchTransaction(d,"reset")}},{key:"clearForm",value:function(e){this.setState({searchInvoiceId:null,searchDateMode:"received",searchDateStart:null,searchDateEnd:null,searchCustomerId:null,searchCustomerName:null,searchUseDeposit:null,searchIsPaid:null,searchIsComplete:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.errorList,l=t.pagingState,c=t.pagingMax,i=t.searchInvoiceId,r=t.searchDateMode,o=t.searchDateStart,m=t.searchDateEnd,d=t.searchCustomerId,u=t.searchCustomerName,h=t.searchUseDeposit,p=t.searchIsPaid,v=t.searchIsComplete,b=t.transactionList,f=this.props.login;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee,null),s.a.createElement(_,{errorList:n}),s.a.createElement("form",{onSubmit:this.submitSearch},s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"ID Invoice"),s.a.createElement("input",{className:"input",type:"number",name:"searchInvoiceId",placeholder:"1023123",onChange:this.handleChange,value:i||""})),s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Jenis Tanggal"),s.a.createElement("span",{className:"select is-expanded"},s.a.createElement("select",{name:"searchDateMode","data-type":"bool",value:r||"",onChange:this.handleSelect},s.a.createElement("option",{value:"false"},"Semua"),s.a.createElement("option",{value:"received"},"Terima"),s.a.createElement("option",{value:"finished"},"Selesai")))),s.a.createElement("div",{className:"false"===r?"hidden":"column"},s.a.createElement("label",{className:"label"},"Dari Tanggal"),s.a.createElement("input",{className:"input",type:"date",name:"searchDateStart",onChange:this.handleChange,value:o?z()(o,"YYYY-MM-DD").format("DD MMM YYYY"):"",autoComplete:"off"})),s.a.createElement("div",{className:"false"===r?"hidden":"column"},s.a.createElement("label",{className:"label"},"Hingga Tanggal"),s.a.createElement("input",{className:"input",type:"date",name:"searchDateEnd",onChange:this.handleChange,value:z()(m,"YYYY-MM-DD").format("DD MMM YYYY")||"",autoComplete:"off"})),s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"ID customer"),s.a.createElement("input",{className:"input",type:"number",name:"searchCustomerId",placeholder:"65",onChange:this.handleChange,value:d||""})),s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Nama customer"),s.a.createElement("input",{className:"input",type:"text",name:"searchCustomerName",placeholder:"Budi",onChange:this.handleChange,value:u||""}))),s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Jenis Pembayaran"),s.a.createElement("span",{className:"select is-expanded"},s.a.createElement("select",{name:"searchUseDeposit","data-type":"bool",value:h||"",onChange:this.handleSelect},s.a.createElement("option",{value:""},"Semua"),s.a.createElement("option",{value:"true"},"Deposit"),s.a.createElement("option",{value:"false"},"Cash")))),s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Status Pembayaran"),s.a.createElement("span",{className:"select is-expanded"},s.a.createElement("select",{name:"searchIsPaid","data-type":"bool",value:p||"",onChange:this.handleSelect},s.a.createElement("option",{value:""},"Semua"),s.a.createElement("option",{value:"false"},"Belum Lunas"),s.a.createElement("option",{value:"true"},"Sudah Lunas")))),s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Sudah diambil?"),s.a.createElement("span",{className:"select is-expanded"},s.a.createElement("select",{name:"searchIsComplete","data-type":"bool",value:v||"",onChange:this.handleSelect},s.a.createElement("option",{value:""},"Semua"),s.a.createElement("option",{value:"false"},"Belum"),s.a.createElement("option",{value:"true"},"Sudah")))),s.a.createElement("div",{className:"column flex flex-align-end"},s.a.createElement("button",{className:"button is-primary is-fullwidth",onClick:function(t){return e.submitSearch(t)}},"Cari")),s.a.createElement("div",{className:"column flex flex-align-end"},s.a.createElement("button",{className:"button is-fullwidth",onClick:this.clearForm},"Clear")))),s.a.createElement("div",{className:"scrollable-table-div"},s.a.createElement("table",{className:a?"table is-fullwidth has-actions m-t-2":"table is-fullwidth is-hoverable has-actions m-t-2"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"ID"),s.a.createElement("th",null,"Tanggal Diterima"),s.a.createElement("th",null,"Jam"),s.a.createElement("th",null,"Nama"),s.a.createElement("th",null,"Alamat"),s.a.createElement("th",null,"Mobile"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Actions"))),s.a.createElement("tbody",null,0===b.length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"8",className:"has-text-centered"},a?s.a.createElement(q,null):"No data available")):b.map(function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,t.invoiceId),s.a.createElement("td",null,"".concat(z()(t.invoiceDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD MMM YYYY"))),s.a.createElement("td",null,"".concat(z()(t.invoiceDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("HH:mm"))),s.a.createElement("td",null,t.customerName),s.a.createElement("td",null,t.customerAddress),s.a.createElement("td",null,t.customerMobile),s.a.createElement("td",null,t.isComplete?s.a.createElement("span",{className:"tag is-success"},"Complete"):t.isPaid?s.a.createElement("span",{className:"tag is-warning"},"Paid"):s.a.createElement("span",{className:"tag is-danger"},"Pending")),s.a.createElement("td",null,s.a.createElement(E.a,{to:"/transactions/".concat(t.invoiceId),className:"button is-info m-r-1"},s.a.createElement(B,{s:"14px"})),1===f?s.a.createElement("button",{className:"button is-danger",onClick:function(){return e.handleDelete(t.invoiceId)}},s.a.createElement("i",{className:"fa fa-times"})):s.a.createElement(s.a.Fragment,null)))})),s.a.createElement("tfoot",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8"},s.a.createElement("div",{className:"pagination is-right",role:"navigation","aria-label":"pagination"},s.a.createElement("span",{className:b.length>0&&l>1?"pagination-previous":"pagination-previous invisible",onClick:function(){return e.fetchTransaction(null,"prev")}},"Previous page"),s.a.createElement("span",{className:b.length>0&&l!==c?"pagination-next":"pagination-next invisible",onClick:function(){return e.fetchTransaction(null,"next")}},"Next page"))))))))}}]),t}(n.Component),le=Object(v.b)(function(e){return{login:e.login.item}})(se),ce=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-narrow"},s.a.createElement(E.a,{to:"/transactions/add",className:"button is-primary"},"Add Transaction"))),s.a.createElement(le,null)))},ie=function(e){var t=e.isLoadingProps,a=e.selectedCustomer,n=e.totalServicesPrice;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"ID:")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:t?"control is-expanded is-loading":"control is-expanded"},s.a.createElement("input",{className:"input",value:a.customerId||"",disabled:!0,readOnly:!0}))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Name:")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:t?"control is-expanded  is-loading":"control is-expanded "},s.a.createElement("input",{className:"input",value:a.customerName||"",disabled:!0,readOnly:!0}))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Address:")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:t?"control is-expanded  is-loading":"control is-expanded "},s.a.createElement("input",{className:"input",value:a.customerAddress||"",disabled:!0,readOnly:!0}))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"No HP:")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:t?"control is-expanded  is-loading":"control is-expanded "},s.a.createElement("input",{className:"input",value:a.customerMobile||"",disabled:!0,readOnly:!0}))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Balance:")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:t?"control is-expanded  is-loading":"control is-expanded "},s.a.createElement("input",{className:"input",value:R()(a.customerBalance).format("0,0")||"",disabled:!0,readOnly:!0}))))),void 0!==n?s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Total:")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:t?"control is-expanded  is-loading":"control is-expanded "},s.a.createElement("input",{className:"input",value:R()(n).format("0,0")||"",readOnly:!0}))))):s.a.createElement(s.a.Fragment,null))},re=function(e){var t=e.isLoading,a=e.customerList,n=e.bindCustomer;return s.a.createElement("div",{className:"scrollable-table-div"},s.a.createElement("table",{className:t?"table is-fullwidth m-t-1":"table is-fullwidth is-hoverable m-t-1"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"ID"),s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Address"),s.a.createElement("th",null,"Phone"),s.a.createElement("th",null,"Balance"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,t?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"5"},s.a.createElement(q,null))):0===a.length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"5"},"No data available")):a.map(function(e){return s.a.createElement("tr",{key:e.id},s.a.createElement("td",null,e.id),s.a.createElement("td",null,e.name),s.a.createElement("td",null,e.address),s.a.createElement("td",null,e.mobile),s.a.createElement("td",null,R()(e.balance).format("0,0")),s.a.createElement("td",null,s.a.createElement("button",{className:"button is-primary",onClick:function(){n(e)}},"Select")))}))))},oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!1,searchCustomer:"",customerList:[]},a.fetchCustomer=a.fetchCustomer.bind(Object(D.a)(Object(D.a)(a))),a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchCustomer();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(g.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.state.searchCustomer!==a.searchCustomer&&this.fetchCustomer(this.state.searchCustomer);case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"fetchCustomer",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",this.setState({customerList:[],isLoading:!0}),e.prev=2,e.next=5,T.a.get(""===t?"".concat(H,"/customers/?page=1"):"".concat(H,"/customers/search?value=").concat(t,"&page=1")).then(function(e){return e.data});case 5:a=e.sent,this.setState({customerList:a.results}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:this.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){"checkbox"===e.target.type?this.setState(Object(x.a)({},e.target.name,e.target.checked)):"number"===e.target.type?this.setState(Object(x.a)({},e.target.name,parseFloat(e.target.value))):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.props,t=e.viewMode,a=e.selectedCustomer,n=e.bindCustomer,l=this.state,c=l.searchCustomer,i=l.customerList,r=l.isLoading;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:0!==t?"column is-offset-2 is-8 is-desktop":"column is-two-fifths-desktop"},s.a.createElement(ie,{selectedCustomer:a})),0===t?s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{className:"input",type:"text",name:"searchCustomer",placeholder:"Search...",onChange:this.handleChange,value:c}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fa fa-search"}))),s.a.createElement(re,{isLoading:r,customerList:i,bindCustomer:n}))):s.a.createElement(s.a.Fragment,null)))}}]),t}(n.Component);function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return e="kg"===t&&e<5?5:Math.ceil(2*e)/2,R()(e*(a+(n?s:0))).format("0,0")}function de(e,t,a,n){return e*(t+(a?n:0))}a(43),a(96);var ue=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={filterText:null},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.handleClick=a.handleClick.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"toggleMenu",value:function(e){"DropdownSearch"===e.target.dataset.componentid?(0!==document.querySelectorAll(".dropdown-menu").length&&document.getElementById("dropdown-menu").classList.toggle("hidden"),0!==document.querySelectorAll("#dropdownInput").length&&document.getElementById("dropdownInput").focus()):"DropdownInput"===e.target.dataset.componentid||(0!==document.querySelectorAll(".dropdown-menu").length&&(document.getElementById("dropdown-menu").classList.remove("hidden"),document.getElementById("dropdown-menu").classList.add("hidden")),0!==document.querySelectorAll("#dropdownInput").length&&document.getElementById("dropdownInput").focus())}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",this.toggleMenu),document.getElementById("dropdownInput").addEventListener("keydown",function(t){if(13===t.keyCode){t.preventDefault();try{var a=document.querySelectorAll(".dropdown-item")[0];e.props.handleChangeProps(a),document.getElementById("dropdown-menu").classList.toggle("hidden"),e.setState(Object(x.a)({},a.dataset.state,a.dataset.value))}catch(n){}}},!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.toggleMenu,!0)}},{key:"handleChange",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleClick",value:function(e){document.getElementById("dropdown-menu").classList.toggle("hidden"),this.setState(Object(x.a)({},e.target.dataset.state,e.target.dataset.value))}},{key:"render",value:function(){var e=this,t=this.state.filterText,a=this.props,n=a.options,l=a.stateName,c=a.stateValue,i=a.handleChangeProps,r=[];n.forEach(function(e,t){r.push({name:e.name,value:e.value,indexOf:t})});var o=new RegExp("".concat(t||""),"i");return r=r.filter(function(e){return o.test(e.name)}),s.a.createElement("div",{"data-componentid":"DropdownSearch",className:"dropdown is-active"},s.a.createElement("div",{"data-componentid":"DropdownSearch",className:"dropdown-trigger"},s.a.createElement("span",{"data-componentid":"DropdownSearch",className:"button is-fullwidth has-text-left","aria-haspopup":"false","aria-controls":"dropdown-menu"},s.a.createElement("span",{"data-componentid":"DropdownSearch"},c||"Please choose"),s.a.createElement("span",{"data-componentid":"DropdownSearch",className:"icon is-small"},s.a.createElement("i",{"data-componentid":"DropdownSearch",className:"fas fa-angle-down","aria-hidden":"true"})))),s.a.createElement("div",{"data-componentid":"DropdownSearch",className:"dropdown-menu hidden",id:"dropdown-menu",role:"menu"},s.a.createElement("div",{"data-componentid":"DropdownSearch",className:"dropdown-content"},s.a.createElement("input",{id:"dropdownInput","data-componentid":"DropdownInput",type:"text",name:"filterText",className:"input dropdown-search",onChange:this.handleChange,value:t||""}),s.a.createElement("hr",{className:"dropdown-divider"}),r.map(function(t,a){return s.a.createElement("span",{className:"dropdown-item",key:a,"data-state":"selectedValue","data-name":l,"data-index":t.indexOf,"data-value":t.value,onClick:function(t){i(t.target),e.handleClick(t)}},t.name)}))))}}]),t}(n.Component),he=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={serviceList:[]},a.handleSelect=a.handleSelect.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.serviceList,e.next=3,T.a.get("".concat(H,"/services")).then(function(e){return e.data});case 3:e.sent.forEach(function(e){t.push(e)}),this.setState({serviceList:t});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSelect",value:function(e){(this.setState(Object(x.a)({},e.dataset.name,e.dataset.value)),"selectedServiceName"===e.dataset.name&&""!==e.dataset.value)&&(0,this.props.bindService)(this.state.serviceList[e.dataset.index])}},{key:"render",value:function(){var e=this.props,t=e.editIndex,a=e.selectedServiceName,n=e.selectedServiceQuantity,l=e.selectedServiceUnit,c=e.selectedServicePrice,i=e.selectedServiceExpress,r=e.selectedServiceIsExpress,o=e.addService,m=e.clearSelectedService,d=e.handleChangeProps,u=this.state.serviceList.map(function(e){return{name:e.name,value:e.name}});return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Layanan")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement(ue,{options:u,stateName:"selectedServiceName",stateValue:a,handleChangeProps:this.handleSelect})),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{type:"number",className:"input",name:"selectedServiceQuantity",placeholder:"Qty...",onChange:d,value:n||""})),s.a.createElement("div",{className:"control"},s.a.createElement("span",{className:"button is-static"},l||"?"))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-expanded"}),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{type:"text",className:"input",tabIndex:"-1",placeholder:"Harga @...",value:c?R()(c).format("0,0"):"",disabled:!0,readOnly:!0})),s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"@"))))),r?s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-expanded"}),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{type:"text",className:"input",tabIndex:"-1",placeholder:"Harga express...",value:i?R()(i).format("0,0"):"",disabled:!0,readOnly:!0})),s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"Express"))))):s.a.createElement(s.a.Fragment,null),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Total Harga")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{type:"text",className:"input",tabIndex:"-1",placeholder:"Total harga...",value:""===n||null===n?"":me(n,l,c,r,i),disabled:!0,readOnly:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"})))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"}),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("label",{className:"checkbox"},s.a.createElement("input",{id:"selectedServiceIsExpress",name:"selectedServiceIsExpress",type:"checkbox",className:"switch is-rounded",onChange:d,checked:r}),s.a.createElement("label",{htmlFor:"selectedServiceIsExpress"},"Express")))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"}),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field is-grouped"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button is-primary",onClick:function(e){return o(e)}},null!==t?"Update":"Tambah")),s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:null===t?"button":"button is-danger",onClick:function(e){return m(e)}},null===t?"Clear":"Cancel"))))))}}]),t}(n.Component),pe=function(e){var t=e.viewMode,a=e.selectedServicesList,n=e.editService,l=e.deleteService;return s.a.createElement("table",{className:"table is-hoverable is-fullwidth has-actions"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Layanan"),s.a.createElement("th",null,"Qty"),s.a.createElement("th",null,"Unit"),s.a.createElement("th",null,"Total"),s.a.createElement("th",null,"Express"),0===t?s.a.createElement("th",null):s.a.createElement(s.a.Fragment,null))),s.a.createElement("tbody",null,a.map(function(e,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,e.serviceName),s.a.createElement("td",null,e.serviceQuantity),s.a.createElement("td",null,e.serviceUnit),s.a.createElement("td",null,me(e.serviceQuantity,e.serviceUnit,e.servicePrice,e.serviceIsExpress,e.serviceExpress)),s.a.createElement("td",null,e.serviceIsExpress?s.a.createElement("span",{className:"tag is-primary"},"Express"):""),0===t?s.a.createElement("td",{className:"has-text-right"},!0===e.serviceIsActive?s.a.createElement("button",{className:"button is-info m-r-1",onClick:function(){return n(a,e)}},s.a.createElement("i",{className:"fas fa-pencil-alt"})):s.a.createElement(s.a.Fragment,null),s.a.createElement("button",{className:"button is-danger",onClick:function(){return l(e)}},s.a.createElement("i",{className:"fas fa-times"}))):s.a.createElement(s.a.Fragment,null))})))},ve=function(e){var t=e.editIndex,a=e.viewMode,n=e.serviceList,l=e.selectedServiceName,c=e.selectedServiceQuantity,i=e.selectedServiceUnit,r=e.selectedServicePrice,o=e.selectedServiceExpress,m=e.selectedServiceIsExpress,d=e.selectedServicesList,u=e.bindService,h=e.addService,p=e.editService,v=e.deleteService,E=e.clearSelectedService,b=e.handleChangeProps;return s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:0!==a?"hidden":"column"},s.a.createElement("form",{className:"form",autoComplete:"off"},s.a.createElement(he,{editIndex:t,serviceList:n,selectedServiceName:l,selectedServiceQuantity:c,selectedServicePrice:r,selectedServiceUnit:i,selectedServiceExpress:o,selectedServiceIsExpress:m,bindService:u,addService:h,clearSelectedService:E,handleChangeProps:b}))),s.a.createElement("div",{className:"column"},s.a.createElement(pe,{selectedServicesList:d,editService:p,deleteService:v,viewMode:a})))},Ee=a(21),be=function(e){var t=e.selectedItemDetailList,a=e.deleteItemDetail;return s.a.createElement("table",{className:"table is-fullwidth is-striped has-actions"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Nama Item"),s.a.createElement("th",null,"Quantity"),s.a.createElement("th",null,"Actions"))),s.a.createElement("tbody",null,t.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.itemDetailName),s.a.createElement("td",null,e.itemDetailQuantity),s.a.createElement("td",{className:"has-text-right"},s.a.createElement("button",{className:"button is-danger",onClick:function(){return a(e)}},s.a.createElement("i",{className:"fas fa-times"}))))})))},fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!1,itemList:[]},a.handleSelect=a.handleSelect.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,T.a.get("".concat(H,"/items")).then(function(e){return e.data});case 3:t=e.sent,this.setState({isLoading:!1,itemList:Object(Ee.a)(t)});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSelect",value:function(e){"selectedItemDetailName"===e.dataset.name&&""!==e.dataset.value&&(0,this.props.bindItemDetail)(this.state.itemList[e.dataset.index])}},{key:"render",value:function(){var e=this.props,t=e.selectedItemDetailList,a=(e.selectedItemDetailId,e.selectedItemDetailName),n=e.selectedItemDetailQuantity,l=e.addItemDetail,c=e.deleteItemDetail,i=e.handleChangeProps,r=this.state,o=(r.isLoading,r.itemList.map(function(e){return{name:e.name,value:e.name}}));return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("form",{className:"form",onSubmit:l,autoComplete:"off"},s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Detail Item")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement(ue,{options:o,stateName:"selectedItemDetailName",stateValue:a,handleChangeProps:this.handleSelect})),s.a.createElement("p",{className:"control"},s.a.createElement("input",{type:"number",className:"input",name:"selectedItemDetailQuantity",placeholder:"Jumlah...",value:n||"",onChange:i})),s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button is-primary"},"Tambah")))))))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(be,{selectedItemDetailList:t,deleteItemDetail:c}))))}}]),t}(n.Component),ge=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;ne.a.attach('[data-type="date"]',{displayMode:"dialog",showHeader:!1,showFooter:!1,dateFormat:"YYYY-MM-DD"}).forEach(function(t){t.on("date:selected",function(a){t.target=t.element,e.props.handleChangeProps(t)})})}},{key:"render",value:function(){var e=this.props,t=e.componentClass,a=e.viewMode,n=e.isRequestingProps,l=e.invoiceId,c=e.selectedDateReceived,i=e.selectedDateFinished,r=e.discountPrice,o=e.useDeposit,m=e.isPaid,d=e.isComplete,u=e.totalServicesPrice,h=e.submitTransaction,p=e.handleChangeProps,v=e.handleSelectProps;return s.a.createElement("form",{onSubmit:function(e){return h(e)}},s.a.createElement("div",{className:t},s.a.createElement("div",{className:"column is-4-desktop"},s.a.createElement("label",{className:"label"},"No Invoice"),s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement("input",{type:"text",className:"input",name:"idInvoice",value:"WW18112810036",disabled:!0})),s.a.createElement("div",{className:"column"},s.a.createElement("input",{type:"text",className:"input",name:"idInvoiceShort",value:l||"",disabled:!0})))),s.a.createElement("div",{className:"column columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Tanggal Terima"),s.a.createElement("input",{type:"text","data-type":"date",className:"input",name:"selectedDateReceived",placeholder:"Masukkan tanggal terima...",onChange:p,value:z()(c,"YYYY-MM-DD").format("DD MMM YYYY")||"",disabled:!0,readOnly:!0})),s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Tanggal Selesai"),s.a.createElement("input",{id:"selectedDateFinished",type:"text","data-type":"date",className:"input",name:"selectedDateFinished",placeholder:"Masukkan tanggal selesai...",onChange:p,value:null!==i?z()(i,"YYYY-MM-DD").format("DD MMM YYYY"):"",disabled:2===a,readOnly:2===a})),s.a.createElement("div",{className:"column"},null!==l?s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"label"},"Status"),s.a.createElement("p",{className:"control"},s.a.createElement("label",{className:"checkbox"},s.a.createElement("input",{className:"switch is-rounded",id:"isComplete",name:"isComplete",type:"checkbox",checked:d,onChange:p,disabled:!0===d||!m,readOnly:!0===d||!m}),s.a.createElement("label",{htmlFor:"isComplete"},"Sudah diambil?")))):s.a.createElement(s.a.Fragment,null)))),s.a.createElement("div",{className:t},s.a.createElement("div",{className:"column is-4-desktop"},s.a.createElement("label",{className:"label"},"Jenis pembayaran"),s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement("input",{type:"text",className:"input",value:o?"Deposit":"Cash",readOnly:!0,disabled:!0})),s.a.createElement("div",{className:o?"hidden":"column"},s.a.createElement("div",{className:"select is-expanded"},s.a.createElement("select",{name:"isPaid","data-type":"bool",value:m,onChange:v,disabled:2===a,readOnly:2===a},s.a.createElement("option",{value:"false"},"Belum Lunas"),s.a.createElement("option",{value:"true"},"Lunas")))))),s.a.createElement("div",{className:"column columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Total Layanan:"),s.a.createElement("input",{type:"text",className:"input",value:R()(u-u*(r||0)/100).format("0,0"),readOnly:!0,disabled:!0})),s.a.createElement("div",{className:"column"},s.a.createElement("label",{className:"label"},"Discount:"),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control is-expanded"},s.a.createElement("input",{type:"number",className:"input",name:"discountPrice",placeholder:"10...",onChange:p,value:r||"",disabled:0!==a,readOnly:0!==a})),s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"%")))),s.a.createElement("div",{className:"column flex flex-align-end"},s.a.createElement("button",{className:n?"button is-primary is-fullwidth is-loading":2===a?"button is-fullwidth":"button is-primary is-fullwidth",onClick:function(e){h(e)},disabled:n||2===a},null===l?"Submit Transaction":"Update Transaction"),s.a.createElement(E.a,{className:void 0!==l?"m-l-1 button is-warning is-fullwidth":"hidden",to:"/print/transactions/".concat(l)},"Print Invoice")))))}}]),t}(n.Component),Ne=(a(98),function(e){var t=e.viewMode,a=e.isLoadingProps,n=e.isRequestingProps,l=e.invoiceId,c=e.selectedDateReceived,i=e.selectedDateFinished,r=e.discountPrice,o=e.useDeposit,m=e.isPaid,d=e.isComplete,u=e.selectedCustomer,h=e.selectedServicesList,p=e.selectedItemDetailList,v=e.submitTransaction,E=e.handleChangeProps,b=e.handleSelectProps,f=0;return h.forEach(function(e){f+=de(e.serviceQuantity,e.servicePrice,e.serviceIsExpress,e.serviceExpress)}),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"is-divider","data-content":"Detail Invoice"}),s.a.createElement(ge,{componentClass:"columns m-b-2 is-desktop",viewMode:t,isRequestingProps:n,invoiceId:l,selectedDateReceived:c,selectedDateFinished:i,discountPrice:r,totalServicesPrice:f,useDeposit:o,isPaid:m,isComplete:d,submitTransaction:v,handleChangeProps:E,handleSelectProps:b}),s.a.createElement("div",{className:"is-divider","data-content":"Detail Customer dan Detail Item"}),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-three-fifths-tablet is-half-desktop"},s.a.createElement(ie,{selectedCustomer:u,isLoadingProps:a})),s.a.createElement("div",{className:"column"},s.a.createElement("table",{className:"table is-fullwidth is-striped is-hoverable"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Nama Item"),s.a.createElement("th",null,"Qty"))),s.a.createElement("tbody",null,a?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},s.a.createElement(q,null))):0===p.length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},"Tidak ada detail item")):p.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.itemDetailName),s.a.createElement("td",null,e.itemDetailQuantity))}))))),s.a.createElement("div",{className:"is-divider","data-content":"Detail Layanan"}),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("table",{className:"table is-fullwidth is-striped is-hoverable"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Layanan"),s.a.createElement("th",null,"Qty"),s.a.createElement("th",null,"Unit"),s.a.createElement("th",null,"Total"),s.a.createElement("th",null,"Express"))),s.a.createElement("tbody",null,a?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"5"},s.a.createElement(q,null))):h.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.serviceName),s.a.createElement("td",null,e.serviceQuantity),s.a.createElement("td",null,e.serviceUnit),s.a.createElement("td",null,me(e.serviceQuantity,e.serviceUnit,e.servicePrice,e.serviceIsExpress,e.serviceExpress)),s.a.createElement("td",null,e.serviceIsExpress?s.a.createElement("span",{className:"tag is-primary"},"Express"):""))}))))))}),Se=(a(100),function(e){var t=e.step,a=[{label:"Pilih customer",icon:"far fa-user",isActive:0===t,isComplete:!0},{label:"Jenis layanan",icon:"fas fa-cash-register",isActive:1===t,isComplete:t>0},{label:"Item detail",icon:"fas fa-tshirt",isActive:2===t,isComplete:t>1},{label:"Selesai",icon:"fas fa-question",isActive:3===t,isComplete:t>2}],n=function(e){var t=e.icon,a=e.label,n=e.isActive,l=e.isComplete;return s.a.createElement("div",{className:l?"step-item is-active is-primary":"step-item is-primary"},s.a.createElement("div",{className:"step-marker"},s.a.createElement("i",{className:n?t:l?"fas fa-check":t})),s.a.createElement("div",{className:"step-details"},s.a.createElement("p",{className:"step-title"},a)))};return s.a.createElement("div",{className:"steps",id:"stepsDemo"},a.map(function(e,t){return s.a.createElement(n,{key:t,icon:e.icon,label:e.label,isActive:e.isActive,isComplete:e.isComplete})}))}),ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={step:a.props.match.params.id?3:0,viewMode:0,invoiceId:a.props.match.params.id||null,errorList:[],isLoading:!1,isRequesting:!1,selectedCustomer:{},editIndex:null,selectedServicesList:[],selectedServiceName:null,selectedServiceQuantity:null,selectedServiceUnit:null,selectedServicePrice:null,selectedServiceExpress:null,selectedServiceIsExpress:!1,selectedServiceIsActive:!1,selectedItemDetailList:[],selectedItemDetailId:null,selectedItemDetailName:null,selectedItemDetailQuantity:null,selectedDateReceived:null,selectedDateFinished:null,useDeposit:!1,isPaid:!1,isComplete:!1,discountPrice:null},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.handleSelect=a.handleSelect.bind(Object(D.a)(Object(D.a)(a))),a.nextStep=a.nextStep.bind(Object(D.a)(Object(D.a)(a))),a.prevStep=a.prevStep.bind(Object(D.a)(Object(D.a)(a))),a.bindCustomer=a.bindCustomer.bind(Object(D.a)(Object(D.a)(a))),a.bindService=a.bindService.bind(Object(D.a)(Object(D.a)(a))),a.addService=a.addService.bind(Object(D.a)(Object(D.a)(a))),a.editService=a.editService.bind(Object(D.a)(Object(D.a)(a))),a.deleteService=a.deleteService.bind(Object(D.a)(Object(D.a)(a))),a.clearSelectedService=a.clearSelectedService.bind(Object(D.a)(Object(D.a)(a))),a.bindItemDetail=a.bindItemDetail.bind(Object(D.a)(Object(D.a)(a))),a.addItemDetail=a.addItemDetail.bind(Object(D.a)(Object(D.a)(a))),a.deleteItemDetail=a.deleteItemDetail.bind(Object(D.a)(Object(D.a)(a))),a.clearSelectedItemDetail=a.clearSelectedItemDetail.bind(Object(D.a)(Object(D.a)(a))),a.submitTransaction=a.submitTransaction.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n,s,l,c,i,r,o,m,d,u,h,p,v;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.props.match.params.id){e.next=31;break}return this.setState({isLoading:!0}),e.prev=2,e.next=5,T.a.get("".concat(H,"/transactions/").concat(this.props.match.params.id)).then(function(e){return e.data});case 5:return t=e.sent,a=this.state,n=a.selectedDateReceived,s=a.selectedDateFinished,l=a.selectedCustomer,c=a.selectedServicesList,i=a.selectedItemDetailList,r=a.discountPrice,o=a.useDeposit,m=a.isPaid,d=a.isComplete,u=a.viewMode,e.next=9,T.a.get("".concat(H,"/customers/").concat(t.customerId)).then(function(e){return e.data});case 9:h=e.sent,n=z()(t.invoiceDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("YYYY-MM-DD"),s=z()(t.invoiceFinished,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("YYYY-MM-DD"),l={customerId:t.customerId,customerName:h.name,customerAddress:h.address,customerMobile:h.mobile,customerBalance:h.balance},t.transactionServices.forEach(function(e){c.push({serviceId:e.serviceId,serviceName:e.serviceName,servicePrice:e.servicePrice,serviceQuantity:e.serviceQuantity,serviceUnit:e.serviceUnit,serviceExpress:e.serviceExpressPrice,serviceIsExpress:e.serviceIsExpress,serviceIsActive:e.serviceIsActive}),l.customerBalance+=e.serviceQuantity*e.servicePrice+(e.serviceIsExpress?e.serviceExpressPrice:0)}),t.transactionItems.forEach(function(e){i.push({itemDetailId:e.itemId,itemDetailName:e.itemName,itemDetailQuantity:e.itemQuantity})}),r=t.discountPrice,o=t.useDeposit,m=t.isPaid,d=t.isComplete,u=1===this.props.login?0:d?2:1,this.setState({selectedCustomer:l,selectedServicesList:c,selectedItemDetailList:i,selectedDateReceived:n,selectedDateFinished:s,discountPrice:r,useDeposit:o,isPaid:m,isComplete:d,viewMode:u}),e.next=29;break;case 23:e.prev=23,e.t0=e.catch(2),p=[],e.t0.response?p.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?p.push("Request Timeout"):e.t0 instanceof Z&&(p=e.t0.errorList),this.setState({errorList:p}),G();case 29:e.next=34;break;case 31:this.state.selectedDateReceived,v=z()().format("YYYY-MM-DD"),this.setState({selectedDateReceived:v});case 34:this.setState({isLoading:!1});case 35:case"end":return e.stop()}},e,this,[[2,23]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){"checkbox"===e.target.type?this.setState(Object(x.a)({},e.target.name,e.target.checked)):"number"===e.target.type?this.setState(Object(x.a)({},e.target.name,parseFloat(e.target.value))):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleSelect",value:function(e){"bool"===e.target.dataset.type?(this.setState(Object(x.a)({},e.target.name,JSON.parse(e.target.value))),"isPaid"===e.target.name&&"false"===e.target.value&&this.setState({isComplete:!1})):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"nextStep",value:function(){var e=this.state,t=e.selectedCustomer,a=e.selectedServicesList,n=e.step,s=e.selectedDateReceived,l=e.selectedDateFinished,c=[];if(0===n)0===Object.keys(t).length&&c.push("Harus memilih 1 pelanggan");else if(1===n){0===a.length&&c.push("Harus memilih minimal 1 layanan"),0===a.filter(function(e){return"kg"===e.serviceUnit}).length&&n++;var i=0,r=0;a.forEach(function(e){r="kg"!==e.serviceUnit&&!0!==e.serviceIsExpress?3:1,i+=e.serviceQuantity*e.servicePrice+e.serviceExpress}),l=z()(s,"YYYY-MM-DD").add(r,"days").format("YYYY-MM-DD");var o=t.customerBalance>i;this.setState({selectedDateReceived:s,selectedDateFinished:l,useDeposit:o,isPaid:o})}0===c.length?(n++,this.setState({step:n})):(this.setState({errorList:c}),G())}},{key:"prevStep",value:function(){var e=this.state.step;3===e&&0===this.state.selectedServicesList.filter(function(e){return"kg"===e.serviceUnit}).length&&e--,e--,this.setState({step:e})}},{key:"bindCustomer",value:function(e){this.setState({selectedCustomer:{customerId:e.id,customerName:e.name,customerAddress:e.address,customerMobile:e.mobile,customerBalance:e.balance}})}},{key:"bindService",value:function(e){this.setState({selectedServiceId:e.id,selectedServiceName:e.name,selectedServiceUnit:e.unit,selectedServicePrice:e.price,selectedServiceExpress:e.express_price,selectedServiceIsActive:e.is_active})}},{key:"addService",value:function(e){e.preventDefault();try{var t=this.state,a=t.selectedServiceId,n=t.selectedServiceName,s=t.selectedServiceQuantity,l=t.selectedServicePrice,c=t.selectedServiceUnit,i=t.selectedServiceExpress,r=t.selectedServiceIsExpress,o=t.selectedServiceIsActive,m=t.editIndex,d=t.selectedServicesList,u=[];if(V.test(n||"")||K.test(c||"")||K.test(l||"")||u.push("Harus pilih layanan"),K.test(s||"")||u.push("Harus isi quantity"),u.length>0)throw new Z(u);var h={serviceId:a,serviceName:n,serviceQuantity:"kg"===c&&s<5?5:Math.ceil(2*s)/2,serviceUnit:c,servicePrice:l,serviceExpress:i,serviceIsExpress:r,serviceIsActive:o};null!==m?d[m]=h:d.push(h),this.clearSelectedService(),this.setState({selectedServicesList:d})}catch(v){var p=[];v.response?p.push("".concat(v.response.status," ").concat(v.response.statusText)):v.request?p.push("Request Timeout"):v instanceof Z?p=v.errorList:console.log(v),this.setState({errorList:p}),G()}}},{key:"editService",value:function(e,t){this.setState({selectedServiceId:t.serviceId,selectedServiceName:t.serviceName,selectedServiceQuantity:t.serviceQuantity,selectedServiceUnit:t.serviceUnit,selectedServicePrice:t.servicePrice,selectedServiceIsExpress:t.serviceIsExpress,selectedServiceIsActive:t.serviceIsActive,editIndex:e})}},{key:"deleteService",value:function(e){if(window.confirm("Do you really want to delete?")){var t=this.state.selectedServicesList;t=t.filter(function(t){return t!==e}),this.setState({selectedServicesList:t})}}},{key:"clearSelectedService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&e.preventDefault(),this.setState({selectedServiceName:null,selectedServiceQuantity:null,selectedServiceUnit:null,selectedServicePrice:null,selectedServiceIsExpress:!1,editIndex:null})}},{key:"bindItemDetail",value:function(e){this.setState({selectedItemDetailId:e.id,selectedItemDetailName:e.name})}},{key:"addItemDetail",value:function(e){e.preventDefault();try{var t=this.state,a=t.selectedItemDetailId,n=t.selectedItemDetailName,s=t.selectedItemDetailQuantity,l=t.selectedItemDetailList,c=[];if(V.test(n||"")||c.push("Harus pilih item"),K.test(s||"")||c.push("Harus isi quantity"),c.length>0)throw new Z(c);var i={itemDetailId:a,itemDetailName:n,itemDetailQuantity:s};l.push(i),this.setState({selectedItemDetailId:0,selectedItemDetailList:l}),this.clearSelectedItemDetail()}catch(o){var r=[];o.response?r.push("".concat(o.response.status," ").concat(o.response.statusText)):o.request?r.push("Request Timeout"):o instanceof Z&&(r=o.errorList),this.setState({errorList:r}),G()}}},{key:"deleteItemDetail",value:function(e){var t=this.state.selectedItemDetailList;t=t.filter(function(t){return t!==e}),this.setState({selectedItemDetailList:t})}},{key:"clearSelectedItemDetail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&e.preventDefault(),this.setState({selectedItemDetailName:null,selectedItemDetailQuantity:null})}},{key:"submitTransaction",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,s,l,c,i,r,o,m,d,u,h,p,v,E,b,g,N=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isRequesting:!0}),e.prev=2,a=this.state,n=a.invoiceId,s=a.selectedDateReceived,l=a.selectedDateFinished,c=a.selectedCustomer,i=a.selectedServicesList,r=a.selectedItemDetailList,o=a.useDeposit,m=a.isPaid,d=a.isComplete,u=a.discountPrice,h=z()(s,"YYYY-MM-DD").hours(z()().format("HH")).minutes(z()().format("mm")).seconds(z()().format("ss")).milliseconds(z()().format("SSSS")).format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]"),p=z()(l,"YYYY-MM-DD").hours(z()().format("HH")).minutes(z()().format("mm")).seconds(z()().format("ss")).milliseconds(z()().format("SSSS")).format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]"),v=0,i.forEach(function(e){v+=e.serviceQuantity*e.servicePrice+e.serviceExpress}),E=[],0===Object.keys(c).length&&E.push("Harus pilih customer"),0===i.length&&E.push("Harus pilih layanan"),o&&c.customerBalance<v&&E.push("Balance customer tidak mencukupi"),i.filter(function(e){return e.serviceIsExpress}).length>0&&i.length!==i.filter(function(e){return e.serviceIsExpress}).length&&E.push("Service biasa dan express tidak boleh dicampur"),!(E.length>0)){e.next=15;break}throw new Z(E);case 15:if(b={invoiceDate:h,invoiceFinished:p,customerId:c.customerId,useDeposit:o,isPaid:m,isComplete:d,discountPrice:""===u?null:u,transactionServices:i.map(function(e){return{serviceId:e.serviceId,serviceQuantity:e.serviceQuantity,serviceIsExpress:e.serviceIsExpress}}),transactionItems:r.map(function(e){return{itemId:e.itemDetailId,itemQuantity:e.itemDetailQuantity}})},null===n){e.next=22;break}return e.next=19,T.a.put("".concat(H,"/transactions/").concat(n),b).then(function(e){return e.data});case 19:$("Transaksi berhasil diupdate"),e.next=26;break;case 22:return e.next=24,T.a.post("".concat(H,"/transactions"),b).then(function(e){return e.data});case 24:n=e.sent,$("Transaksi berhasil ditambahkan");case 26:setTimeout(function(){N.props.history.push("/print/transactions/".concat(n))},2e3),e.next=35;break;case 29:e.prev=29,e.t0=e.catch(2),g=[],e.t0.response?g.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?g.push("Request Timeout"):e.t0 instanceof Z&&(g=e.t0.errorList),this.setState({errorList:g}),G();case 35:this.setState({isRequesting:!1});case 36:case"end":return e.stop()}},e,this,[[2,29]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.step,n=t.errorList,l=t.viewMode,c=t.invoiceId,i=t.isLoading,r=t.isRequesting,o=t.selectedCustomer,m=t.editIndex,d=t.selectedServicesList,u=t.selectedServiceName,h=t.selectedServiceQuantity,p=t.selectedServiceUnit,v=t.selectedServicePrice,E=t.selectedServiceExpress,b=t.selectedServiceIsExpress,f=t.selectedItemDetailId,g=t.selectedItemDetailName,N=t.selectedItemDetailQuantity,S=t.selectedItemDetailList,y=t.selectedDateReceived,x=t.selectedDateFinished,D=t.useDeposit,k=t.isPaid,C=t.isComplete,O=t.discountPrice;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee,null),s.a.createElement(_,{errorList:n}),s.a.createElement(Se,{step:a}),C?s.a.createElement(s.a.Fragment,null):s.a.createElement(function(t){return 2!==t.viewMode?s.a.createElement("div",{className:"field is-grouped is-grouped-right"},s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:a>0?"button is-danger":"is-invisible",onClick:function(t){t.preventDefault(),e.prevStep()}},"Kembali")),s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:a<3?"button is-primary":"hidden",onClick:function(t){t.preventDefault(),e.nextStep()}},"Konfirmasi"))):s.a.createElement(s.a.Fragment,null)},{viewMode:l}),0===a?s.a.createElement(oe,{viewMode:l,selectedCustomer:o,bindCustomer:this.bindCustomer,handleSelectProps:this.handleSelect}):1===a?s.a.createElement(ve,{editIndex:m,viewMode:l,selectedServiceName:u,selectedServiceQuantity:h,selectedServicePrice:v,selectedServiceUnit:p,selectedServiceExpress:E,selectedServiceIsExpress:b,selectedServicesList:d,bindService:this.bindService,addService:this.addService,editService:this.editService,deleteService:this.deleteService,clearSelectedService:this.clearSelectedService,handleChangeProps:this.handleChange}):2===a?s.a.createElement(fe,{selectedItemDetailList:S,selectedItemDetailId:f,selectedItemDetailName:g,selectedItemDetailQuantity:N,bindItemDetail:this.bindItemDetail,addItemDetail:this.addItemDetail,deleteItemDetail:this.deleteItemDetail,handleChangeProps:this.handleChange}):3===a?s.a.createElement(Ne,{viewMode:l,isLoadingProps:i,invoiceId:c,isRequestingProps:r,discountPrice:O,selectedDateReceived:y,selectedDateFinished:x,selectedCustomer:o,selectedServicesList:d,selectedItemDetailList:S,useDeposit:D,isPaid:k,isComplete:C,submitTransaction:this.submitTransaction,handleChangeProps:this.handleChange,handleSelectProps:this.handleSelect}):s.a.createElement(s.a.Fragment,null))}}]),t}(n.Component),xe=Object(v.b)(function(e){return{login:e.login.item}})(ye),De=(a(44),a(24)),ke=a.n(De),Ce=(a(45),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABegAAAXoBMrnI/AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA4DSURBVHic7Zt7UNRXlsc/v+6mXzSPbqB5dQO+QAkGdHWyURdLXUlqJsq6ptiJMqlsMuNOJpMoSdaaOLLRvDc7lYqzMW40MbGyibGSWtYx2a2YBHUQTRYiIqKgGBGbBhpoaOim3937R0NHwkPoBjOZ3W/Vrwp+99xzzv32/d3fuefcH36/n+9eQDFgB/x/JpcdKB5trCJGx08A+RhtP0TICYxpBCRjdBAA4mZko06bM11O3RL0tFym++oFGBzTdzEWAQCII6REKCKnw69bBnGEdNz2cQn4Lhx9ZkyXasNy6LtIW7Ri2P+dl2uxW8xo0rNQJaQE7w+YTXR9U49UqSIpe/GwPoaaCnxeD8nZi4lQqiZlf1IEeFxObF1tkzIwWdgtZmxdbUQl6obbdtqxdbXhjVKP6GPrbsfnceP1uImYpL1JESBTxZB02+KbC4YBTXoWUYk6lGrtsPvymDiSbluMOEI2ok/ivL/A7/MSoVBO2t6kCIiQK1Hrp3dRvHHa3wipUoVUObrt2NSZIdsbl4ABc0fIiv9UcLMxjEuAtasN6zQ/8983xiUgJyeHrKysW+XLtKCxsZHz58+P2T4uAffeey+PP/74lDt1K/HKK6+ETsAQzGYzBoOB6OhoMjIypsq3aUFzczN9fX3odDo0Gs1N5cfaCwxDWVkZy5Yto6SkJGwHpxslJSUsW7aMsrKyCclPiACZTEZ0dDQq1eSirO8DKpWK6OhoZLKR8cJomNAjUFxcTHFxcViO3Sq8++67k5Kf0Az4c8b/eQImFQqHA5vNRmVlJSdOnODChQt0d3djNptxOBwkJyej0+nIyMhg5cqV5OfnT/gZDhfTTkBFRQW7du2ivLwcj8czqozJZKK2NrDN3r17N0qlktWrV7N582YWLVo0rf5NGwEnT56ktLSUr7/+OnhPJJYQGZ+ENDIGiUyBRBbIunmcDjxOOy6bBVtXOwMDAxw+fJjDhw9TUFBAaWkpubm50+LnlBPgdrt5/vnnefXVV/H5fABEaXXE6GaiiktGEIvH7e/3erF2t2ExfEO/ycDRo0cpLy+ntLSULVu2IAijZrZCxpQS0N3dzfr16zlz5gwASnUC2qwFKGLjgzIep4OBHhMexwAepz3ghEyBRK5EqdYikcmJ0uqI0uqw93ZhaqxhoKeTp59+moqKCvbv309sbOyU+TxlBJjNZtauXUtdXR0IAtrMPOJmzAPA7/PRc72JvrZm7L1d4+pRxMYTnZyBWj8bRWw86XespvvqRUyXzvL555+zfv16jhw5glI5+eTHaJgSAvr7+yksLKSurg6xJIKU3KXBxEZf2zVMl87ittuC8jK5nNlz55KZnQ2CQNPFi1xpbGTAZsPe24W9twtz80W0mXlEJ6cTN2MeMlUMxtpKqqqquO+++/jwww+RSsdPeE4EU0LA1q1bqa2tRRCJ0C1cjlKjxe/z0X6xmt7rTQBIpVI2bNrEvfffT9qMGYhEw0MQv99P67VrfLB/P+/v24fLbqO1thKbuYOkeYtQJaSgW7iclupyjh07xvbt23n55ZfD9j3sQOjjjz/mvffeAyApe3Fg8F4vLdXl9F5vQhAE1hQV8UlVFU/u3EnGrFkjBg8gCAK6jAyefOYZjnz1FT9evx5BEOi93kRLdTl+rxelRhvMCO/du5fq6upw3Q+PALvdzpYtWwCISZ1BrG4WAMbzXzJgNiESifjdW2/x4p49JOt046kahtS0NF7eu5dnfv97BEFgwGzCeP5LAGJ1s4hJnYHP5+PRRx8dM7aYKMIi4ODBg5hMJgSRmIQ5gfe0ubmBvrZrAPzmxRe5q7AwZP3rNmzgH599FgisJebmBgAS5uQiiMTU19dz5MiRcIYQOgF+v5/du3cDgVR2hFyJ1+Wks6kOgF+UlLDh5z8PyzmA+x9+mE2DWanOpjq8LicRciWa9ECq7s033wxLf8gEnDp1isuXLwOgSc8MOujzuEnR63l027awHLsRv9q6FW1yMj6PO0jwkM2KigpqamqwWCzBy+VyTVh3yAQcP34cAEVMHBK5Er/Ph8V4FYCiBx4YdaELFZKIiOBsshiv4vf5kMiVKGLiAFi+fDl6vT54ZWRkcO7cuQnpDtnLEydOAKAaLGENlaekMhnrf/azMfv1ms188NZbXL54cVJtRQ88gFyhwOdxY+tuH2b7u7BarVRVVU1oHCHFAT6fL7jJGfoVbF1GAFJ0Ol576SXqa2oA+Ptf/5rVa9YgEovZ9dxzHHj9dVxOJwBLVqzgX/btI0at5l9feIG3X3tt1LbTJ05Q8dlnqOPiaDMYsHUZUSWkBG0DzFz6YyRyJa1nTwYJmjYCrFYrbrc7oECmAMA1GOk1X7lC85UrQdknHnoIbXIyyshImpsCQVGkTo+jq4tTx47xt/n5xKjVXKqvB0ClT8Pe2RlsU8fF0VBXN8z+kK0h2wAiSUSgFD7JzVJIBPT19X2rILiltQfv6QruJn1tIT0X6rl2uAxTaysAYrmcuQ/9glk/3YDlUiNV27fRYTTSYTQiUSiY9w+/Ysb6ewNtv33q2za5gqT8fHrqz2NrbcXjsA+zHQ5CIqC/vz/4t0gcKEj7BmeESp/Gwu3/BIJAXG4es3+6ga6ar7EZjaSuWIUkMnDgIiYzi78+9BGd1VXYTSZSVq5ColAE21Yd+gjTV6exd3SgW30XkshIDEc/5cyzO/B53cNsh4OQCLhxO+px2YmQRyKSBJxJ+8k9w6ehIBC/cBHxC0dRJAgkLP7RqDYEkYjEO5cOu+fsDuwkh059eFz2Ef0mi5AISExMRCKR4PF48DgcRMgjiZArcfSZcVutYTs1hK93lCKPT2Bm0d+h0CZirg+UuIbOCHgcjqCs6VItYokEl9UyKRshvQZFIhFJSUkAuB2BBUkZlwhA19kzoagcga6aM7R+8TnX/vCfRERFA2AeXAylkTHDbAP0tTXTc70Jt2MAgJiYmAnZCXk7vGDBAgwGA9ZOI9FJaUQOEmBpaMDrsCOWK26iYRz4/TS9/+8ApK5ajUShYKDNiNPcDUCUNhUAa2fg1XvHHXewZMmSYHetVss999wzIVMhE1BYWMiRI0ewmlrB70emikUileNxOTB8dpT0NaFvgupffw3Tl6cRRCLS/2YdANf/+7+AwPRXqhPA7w/YBrZt28aKFSvG1DceQo4E7777bqRSKV63c0RkdnHvv425FngHA53RYG9vp+aF57jywfsA5G59itisuTh7eoL3NOmZIAjYutvxup3Ex8eTn58f6jBCnwHR0dGsXbuWjz76iM7L54iMT0abmYet04irt5eGN99g/pYnRgzwiw1FRKakos7JQZ0zH7FMjq3VQP/Vb2j/4wl8g/v77IcfCbxRgIt79+Cx2xFLZWgG84ymy4E6wrp16xDfJNM8HsJKiT311FOUlZVht3TT195CdFIayfPvpKXqC5rL/oP4hYtIzl8elG/+Qxk+t5v+a830X2um5ZOPR+iMy80j+5ePoM7JAaDxnf20fBzY82sz8xCJJfS1NeOwmFEoFDzxxBMjdEwGYREwZ84cioqKAomRxhoiNYlExiWiyZiLubmBqt/+Bl3BXdz2yGPINBrmbXqYpKV/hfH4Mawt17B3dCCSSIjU61Hp09DcnkvCom+P4V05+B6Nb+0DQJMxl1jdLDxOBx2NZ4HAWYCUlNFPlU0UYSdFd+7cSXl5OR0dHRhqKkj70Uq0mXl4XU4sxqsYjn5Kx6lK5v3yETLWFqK+LQf1bTnj6rReb6Fh7xsYj5cDEJ2URmLWAvw+H4aaP+JxDDBz5kw2b94crvvhE5CUlMQ777zDmjVrGOgx0Xb+f0jJuYOU2+9EHq3G1HgWt9XKud/9Mw373kAzfz6anPlo5t9OTGYWgliMu7+fgfY2eurP037yJN1nz+D3+RBHSImflYMmPQs/YKw7jb23i6ioKA4dOoRCEcardqoIAFi6dCkvvfQSTz75JJbWb/A4BkjNW4YmYy5RWh2dTeewGJtxWXppP1lB+8mKm+qM1c0iITMXiVSO1+3CUFPBgLkDkUjE22+/PWWn16asMrRp0yaUSiWPPfYYtu52mk9/Ssr8v0ShTiDl9iUkzLmdflMr1k4jzv4ePC4nBD7OAECqjEIRG4c8Jp7IuERkqkAkZ+/pxFh3GteAFblczr59+ygoKJgqt6e2NlhcXExiYiIPPvggFouF5q8+I0qrIyEzF5kqBk16VjCZ6ff78TrtIAiIJBGIxMNdcVotdF6qpd9kAAKP2qFDh1iwYMFUujz11eHVq1dTXV3N1q1bKSsro99koN9kQBEbT1RioOgpjYxGEAQk8uH1PZetLyDfYQjWEAVBYOPGjezYsQOtVjuaybAwLecDEhMTOXDgABs3bmTXrl1UVFQEa36mxrMIgmiwIhxYxDwOOx6nHb/fF9QhEolYvnw5O3bsmPJf/UZM6wmRgoICCgoKaGpq4sCBA8HjMS6XC7fDNmw3ByCXy8nOzqawsJCioiJSU1On0z3gFp0Rmj17Ns8OVnhcLhcXLlzAYDDg9Xrx+XxIpVIyMzOZOXNmWGFtKLhlh6SGIJVKycvLIy8v71abHhX/f0xuIkINDQ1UVlai1+un9B08HTh69CjXr19n6dKlzJ0796byE5oBlZWVlJSUsGfPnrAdnG7s2bOHkpISKisrJyQ/oRmg1+tZtWoVCxeOltr908KQj3q9fkLyEyJg6HX2Q0Bpaemk5McloLe3l5aWlrAc+r7R29s7vsAYX48f5Pv/4nuqr4OT+Xr8E8AxRtsPEQ4CYxqB/wW319ysR6bAkQAAAABJRU5ErkJggg=="),Oe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={transactionLogo:Ce,columnServices:[{title:"Nama Layanan",dataKey:"name"},{title:"Qty",dataKey:"quantity"},{title:"Unit",dataKey:"unit"},{title:"",dataKey:"isExpress"},{title:"Harga",dataKey:"price"},{title:"Total",dataKey:"total_price"}],dataServices:[],columnItems:[{title:"Nama Item",dataKey:"name"},{title:"Qty",dataKey:"quantity"}],dataItems:[],columnDetail:[{title:"ColName",dataKey:"colName"},{title:"ColValue",dataKey:"colValue"}],dataDetail:[]},e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n,s,l,c,i,r,o,m,d,u,h,p,v,E,b,g,N,S,y,x;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.columnServices,n=t.dataServices,s=t.columnItems,l=t.dataItems,c=t.columnDetail,i=t.dataDetail,r=this.props.match.params.id,e.next=4,T.a.get("".concat(H,"/transactions/").concat(r)).then(function(e){return e.data});case 4:return o=e.sent,m=o.invoiceDate,d=o.invoiceFinished,u=z()(m,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("HH:mm"),m=z()(m,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD MMM YYYY"),d=z()(d,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD MMM YYYY"),e.next=11,T.a.get("".concat(H,"/customers/").concat(o.customerId)).then(function(e){return e.data});case 11:(h=e.sent).id=o.customerId,p=0,v=0,E=!1,o.transactionServices.forEach(function(e){e.name=e.serviceName,e.quantity=e.serviceQuantity,e.unit=e.serviceUnit||"kg",e.price=R()(e.servicePrice).format("0,0"),e.total_price=me(e.serviceQuantity,e.serviceUnit,e.servicePrice,e.serviceIsExpress,e.serviceExpressPrice),e.serviceIsExpress&&(E=!0),p+=R()(e.total_price).value(),n.push(e)}),o.transactionItems.forEach(function(e){e.name=e.itemName,e.quantity=e.itemQuantity,v+=e.itemQuantity,l.push(e)}),0===l.length&&l.push({name:"Tidak ada detail"}),i=[{colName:"Sub Total",colValue:"Rp ".concat(R()(p).format("0,0"))},{colName:"Discount",colValue:"Rp ".concat(R()(p*o.discountPrice/100).format("0,0")," (").concat(o.discountPrice,"%)")},{colName:"Jumlah barang",colValue:v},{colName:"Total Harga",colValue:"Rp ".concat(R()(p-o.discountPrice*p/100).format("0,0"))},{colName:"Sisa Deposit",colValue:"Rp ".concat(R()(h.balance).format("0,0"))}],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{addPageContent:e||"",showHeader:null===(arguments.length>4&&void 0!==arguments[4]?arguments[4]:null),margin:{top:30,right:a||15,bottom:44,left:n||15},startY:null===t?45:t+5,tableLineColor:[0,0,0],tableLineWidth:.1,styles:{font:"courier",fontSize:6,textColor:[0,0,0],lineColor:[44,62,80],lineWidth:.25},headerStyles:{fillColor:[255,255,255],lineWidth:0},bodyStyles:{fillColor:[255,255,255],lineWidth:0},alternateRowStyles:{fillColor:[240,240,240]}}},g=new ke.a("potrait","mm","a5"),N=g.internal.pageSize.width||g.internal.pageSize.getWidth(),S=g.internal.pageSize.height||g.internal.pageSize.getHeight(),y=function(e){g.setFontSize(10),g.setTextColor("#000"),g.setFontStyle("bold"),g.addImage(Ce,"png",e.settings.margin.left,10,10,10),g.text("Wishy Washy Laundry",e.settings.margin.left+15,15),g.setFontSize(8),g.setTextColor("#808080"),g.setFontStyle("normal"),g.text("We clean, you relax",e.settings.margin.left+15,19),g.setFontSize(10),g.setTextColor("#808080"),g.setFontStyle("normal"),g.text("WW18122219822",N-42,15),g.line(e.settings.margin.left,24,N-15,24),g.setFontSize(6),g.setTextColor("#808080");var t=10;["Perhatian","1. Barang yang tidak diambil setelah 1 bulan diluar tanggung jawab kami","2. Barang hilang/rusak diganti maksimal 5x ongkos cuci","3. Kerusakan/kelunturan/mengerut karena sifat bahan merupakan resiko konsumen","4. Hak CLAIM berlaku 24 jam setelah cucian di ambil","5. Hasil cucian yang tidak bersih dapat di kembalikan untuk di cuci ulang, max 24 jam setelah pengambilan","6. Kami tidak bertanggung jawab apabila ada barang/dokumen yang ikut tercuci","7. Cek dahulu cucian anda sewaktu pengambilan, apabila cucian sudah keluar dari outlet kami, maka kami tidak menerima COMPLAIN berupa apapun & dgn ALASAN apapun"].slice().reverse().forEach(function(a,n){t+=a.length>=85?2.5:0,g.text(g.splitTextToSize(a,N-35,{}),e.settings.margin.left,S-(t+3*n))})},g.setFontSize(6),g.setTextColor("#000"),g.setFont("courier"),g.text("No nota: ".concat(r),15,28),g.text("Kode / Nama: ".concat(h.id," / ").concat(h.name),15,32),g.text("Alamat: ".concat(h.address),15,36),g.text("No Telp: ".concat(h.mobile),15,40),g.text("Tanggal Terima: ".concat(m),N-50,28),g.text("Jam Terima: ".concat(u),N-45,32),g.text("Tanggal Selesai: ".concat(d),N-51.3,36),g.autoTable(a,Object(Ee.a)(n),b(y)),x=g.autoTable.previous.finalY,g.autoTable(s,Object(Ee.a)(l),b(null,x,75)),g.autoTable(c,Object(Ee.a)(i),b(null,x,null,75,!1)),g.setFontSize(36),g.setTextColor("#e74c3c"),E&&g.text("Express",N-70,110),document.getElementById("output").src=g.output("datauristring");case 43:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("embed",{id:"output",type:"application/pdf"})}}]),t}(n.Component),Ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={transactionLogo:Ce,columnTransactions:[{title:"Tanggal",dataKey:"invoiceDate"},{title:"No Invoice",dataKey:"invoiceId"},{title:"Customer",dataKey:"customerName"},{title:"Quantity Unit",dataKey:"invoiceQuantity"},{title:"Total",dataKey:"totalPrice"}]},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n,s,l,c,i,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.columnTransactions,a=this.props.dataTransactions,n=0,s=0,l=0,a.forEach(function(e){e.customerName="(".concat(e.customerId,") ").concat(e.customerName),e.invoiceDate=z()(e.invoiceDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD MMM YYYY"),e.totalPrice=0;var t=[];e.invoiceServices.forEach(function(a){t.push("".concat(a.serviceQuantity," ").concat(a.serviceUnit)),e.totalPrice+=a.servicePrice*a.serviceQuantity+(a.serviceIsExpress?a.serviceExpressPrice:0),e.totalPrice+=de(a.serviceQuantity,a.servicePrice,a.serviceIsExpress,a.serviceExpressPrice),"kg"===a.serviceUnit&&(l+=a.serviceQuantity)}),e.invoiceQuantity=t.join(", "),n++,s+=e.totalPrice,e.totalPrice=R()(e.totalPrice).format("0,0")}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{addPageContent:e||"",showHeader:null===(arguments.length>4&&void 0!==arguments[4]?arguments[4]:null),margin:{top:30,right:a||15,bottom:44,left:n||15},startY:null===t?45:t+5,tableLineColor:[0,0,0],tableLineWidth:.1,styles:{font:"courier",fontSize:6,textColor:[0,0,0],lineColor:[44,62,80],lineWidth:.25},headerStyles:{fillColor:[255,255,255],lineWidth:0},bodyStyles:{fillColor:[255,255,255],lineWidth:0},alternateRowStyles:{fillColor:[240,240,240]}}},i=new ke.a("potrait","mm","a5"),i.internal.pageSize.width||i.internal.pageSize.getWidth(),i.internal.pageSize.height||i.internal.pageSize.getHeight(),r=function(e){i.setFontSize(10),i.setTextColor("#000"),i.setFontStyle("bold"),i.addImage(Ce,"png",e.settings.margin.left,10,10,10),i.text("Wishy Washy Laundry",e.settings.margin.left+15,15),i.setFontSize(8),i.setTextColor("#808080"),i.setFontStyle("normal"),i.text("We clean, you relax",e.settings.margin.left+15,19)},i.setFontSize(6),i.setTextColor("#000"),i.setFont("courier"),i.text("Number of Transactions: ".concat(R()(n).format("0,0")),15,28),i.text("Total Income: Rp ".concat(R()(s).format("0,0")),15,32),i.text("Total Kilos: ".concat(l),15,36),i.autoTable(t,Object(Ee.a)(a),c(r)),document.getElementById("output").src=i.output("datauristring");case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("embed",{id:"output",type:"application/pdf"})}}]),t}(n.Component),je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isLoadingProps:!1,periodType:["daily","monthly","yearly"],monthsList:[],yearsList:["2019"],selectedPeriodType:"monthly",selectedDaily:z()().format("YYYY-MM-DD"),selectedMonth:z()().format("MMMM"),selectedYear:z()().format("YYYY"),dataTransactions:[]},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,s,l,c,i,r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoadingProps:!0,dataTransactions:[]}),a=this.state,n=a.selectedPeriodType,s=a.selectedDaily,l=a.selectedMonth,c=a.selectedYear,"daily"===n?i=z()(s,"YYYY-MM-DD").format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]"):"monthly"===n?i=z()("".concat(c,"-").concat(z()(l,"MMMM").format("MM"),"-01"),"YYYY-MM-DD").format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]"):"yearly"===n&&(i=z()("".concat(c,"-").concat(z()(l,"MMMM").format("MM"),"-01"))),r="".concat(z()(i,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").add("1","month").add("-1","milliseconds").format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]")),e.next=7,T.a.post("".concat(H,"/reports/transactions"),{invoiceDateFrom:i,invoiceDateTo:r,invoiceFinishFrom:null,invoiceFinishTo:null});case 7:o=e.sent,this.setState({isLoadingProps:!1,dataTransactions:o.data});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){"checkbox"===e.target.type?this.setState(Object(x.a)({},e.target.name,e.target.checked)):"number"===e.target.type?this.setState(Object(x.a)({},e.target.name,parseFloat(e.target.value))):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){var e=this;ne.a.attach('[data-type="date"]',{displayMode:"dialog",showHeader:!1,showFooter:!1,dateFormat:"YYYY-MM-DD"}).forEach(function(t){t.on("date:selected",function(a){t.target=t.element,e.handleChange(t)})});for(var t=[],a=1;a<=12;a++)t.push(z()(a,"MM").format("MMMM"));this.setState({monthsList:t})}},{key:"render",value:function(){var e=this.state,t=e.isLoadingProps,a=e.periodType,n=e.monthsList,l=e.yearsList,c=e.selectedPeriodType,i=e.selectedDaily,r=e.selectedMonth,o=e.selectedYear,m=e.dataTransactions;return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",null,s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Period Type:")),s.a.createElement("div",{className:"field-body"},s.a.createElement("span",{className:"select"},s.a.createElement("select",{name:"selectedPeriodType",value:c||"",onChange:this.handleChange},a.map(function(e){return s.a.createElement("option",{key:e},e)}))))),s.a.createElement("div",{className:"field is-horizontal"},"daily"===c?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Date:")),s.a.createElement("div",{className:"field-body"},s.a.createElement("input",{type:"text","data-type":"date",className:"input",name:"selectedDaily",placeholder:"Masukkan tanggal terima...",onChange:this.handleChange,value:z()(i,"YYYY-MM-DD").format("DD MMM YYYY")||""}))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Periode:")),s.a.createElement("div",{className:"field-body"},"yearly"!==c?s.a.createElement("div",{className:"field is-narrow"},s.a.createElement("span",{className:"select"},s.a.createElement("select",{name:"selectedMonth",value:r||"",onChange:this.handleChange},n.map(function(e){return s.a.createElement("option",{key:e,value:e},e)})))):s.a.createElement(s.a.Fragment,null),s.a.createElement("div",{className:"field is-narrow"},s.a.createElement("span",{className:"select"},s.a.createElement("select",{name:"selectedYear",value:o||"",onChange:this.handleChange},l.map(function(e){return s.a.createElement("option",{key:e,value:e},e)}))))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"}),s.a.createElement("div",{className:"field-body"},s.a.createElement("button",{className:"button is-primary",onClick:this.handleSubmit},"Create Report")))),s.a.createElement("br",null),0!==m.length?s.a.createElement(Ie,{dataTransactions:m}):t?s.a.createElement(q,null):s.a.createElement("span",null,"No data / Select months"))}}]),t}(n.Component),we=function(e){var t=e.depositName,a=e.depositPrice,n=e.depositAmount,l=e.depositDuration,c=e.handleChange,i=e.submitDeposit;return s.a.createElement("form",{onSubmit:i},s.a.createElement("button",{className:"hidden",onClick:i}),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Deposit")),s.a.createElement("div",{className:"field-body"},s.a.createElement("input",{type:"text",className:"input",name:"depositName",placeholder:"Nama deposit...",onChange:c,value:t||""}))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Harga")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"Rp")),s.a.createElement("p",{className:"control is-expanded"},s.a.createElement("input",{type:"text",className:"input",name:"depositPrice",placeholder:"Jumlah yang dibayar...",onChange:c,value:a?R()(a).format("0,0"):""}))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Nilai")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"+")),s.a.createElement("p",{className:"control is-expanded"},s.a.createElement("input",{type:"text",className:"input",name:"depositAmount",placeholder:"Jumlah yang diterima...",onChange:c,value:n?R()(n).format("0,0"):""}))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Durasi")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control is-expanded"},s.a.createElement("input",{type:"text",className:"input",name:"depositDuration",placeholder:"Masa durasi deposit sebelum expire...",onChange:c,value:l?R()(l).format("0"):""})),s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"hari"))))))},Me=function(e){var t=e.isLoading,a=e.depositList,n=e.bindDeposit;return s.a.createElement("div",{className:t?"":"scrollable-table-div"},s.a.createElement("table",{className:t?"table has-actions":"table is-hoverable has-actions"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Deposit"),s.a.createElement("th",null,"Harga"),s.a.createElement("th",null,"Nilai"),s.a.createElement("th",null,"Durasi"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,0===a.length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"5"},t?s.a.createElement(q,null):"No data available")):a.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.name),s.a.createElement("td",null,R()(e.price).format("0,0")),s.a.createElement("td",null,R()(e.amount).format("0,0")),s.a.createElement("td",null,e.duration?"".concat(e.duration," hari"):"No duration"),s.a.createElement("td",{className:"has-text-right"},s.a.createElement("button",{className:"button is-info m-r-1",onClick:function(){return n(e)}},s.a.createElement("i",{className:"fas fa-pencil-alt"}))))}))))},Le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!1,isRequesting:!1,errorList:[],depositId:0,depositName:null,depositPrice:null,depositAmount:null,depositDuration:null,depositList:[]},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.bindDeposit=a.bindDeposit.bind(Object(D.a)(Object(D.a)(a))),a.submitDeposit=a.submitDeposit.bind(Object(D.a)(Object(D.a)(a))),a.deleteDeposit=a.deleteDeposit.bind(Object(D.a)(Object(D.a)(a))),a.clearDeposits=a.clearDeposits.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchDeposits()}},{key:"handleChange",value:function(e){"checkbox"===e.target.type?this.setState(Object(x.a)({},e.target.name,e.target.checked)):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"fetchDeposits",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({depositList:[],isLoading:!0}),e.prev=1,e.next=4,T.a.get("".concat(H,"/deposits")).then(function(e){return e.data});case 4:t=e.sent,this.setState({depositList:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:this.setState({isLoading:!1});case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"bindDeposit",value:function(e){var t=this.state,a=t.depositId,n=t.depositName,s=t.depositPrice,l=t.depositAmount,c=t.depositDuration;a=e.id,n=e.name,s=e.price,l=e.amount,c=e.duration,this.setState({depositId:a,depositName:n,depositPrice:s,depositAmount:l,depositDuration:c})}},{key:"submitDeposit",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,s,l,c,i,r,o,m;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isRequesting:!0}),e.prev=2,a=this.state,n=a.depositId,s=a.depositName,l=a.depositPrice,c=a.depositAmount,i=a.depositDuration,r=[],l=R()(l).value(),c=R()(c).value(),V.test(s||"")||r.push("Deposit harus diisi"),K.test(l||"")||r.push("Harga harus diisi"),K.test(c||"")||r.push("Nilai harus diisi"),K.test(i||"")||r.push("Durasi deposit harus diisi"),!(r.length>0)){e.next=13;break}throw new Z(r);case 13:if(o={name:s,price:l,amount:c,duration:i},0===n||void 0===n){e.next=20;break}return e.next=17,T.a.put("".concat(H,"/deposits/").concat(n),o);case 17:$("Deposit berhasil diubah"),e.next=23;break;case 20:return e.next=22,T.a.post("".concat(H,"/deposits"),o);case 22:$("Deposit berhasil ditambahkan");case 23:this.clearDeposits(),this.fetchDeposits(),e.next=33;break;case 27:e.prev=27,e.t0=e.catch(2),m=[],e.t0.response?m.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?m.push("Request Timeout"):e.t0 instanceof Z&&(m=e.t0.errorList),this.setState({errorList:m}),G();case 33:this.setState({isRequesting:!1});case 34:case"end":return e.stop()}},e,this,[[2,27]])}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDeposit",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isRequesting:!0}),e.prev=2,void 0===(a=this.state.depositId)&&0===a){e.next=10;break}return e.next=7,T.a.delete("".concat(H,"/deposits/").concat(a));case 7:$("Deposit berhasil ditambahkan"),e.next=11;break;case 10:throw new _("Select deposit first");case 11:this.fetchDeposits(),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(2),n=this.state.errorList,e.t0.response?n.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?n.push("Request Timeout"):e.t0 instanceof Z&&(n=e.t0.errorList),this.setState({errorList:n}),G();case 20:this.setState({isRequesting:!1});case 21:case"end":return e.stop()}},e,this,[[2,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clearDeposits",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&e.preventDefault(),this.setState({depositId:0,depositName:"",depositPrice:0,depositAmount:0})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isRequesting,n=e.errorList,l=e.depositId,c=e.depositName,i=e.depositPrice,r=e.depositAmount,o=e.depositDuration,m=e.depositList;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee,null),s.a.createElement(_,{errorList:n}),s.a.createElement("div",{className:"flex flex-justify-end m-b-2"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:a?"button is-primary is-loading m-r-1":"button is-primary m-r-1",onClick:this.submitDeposit,disabled:a},0===l?"Submit":"Update")),s.a.createElement("p",{className:0===l?"hidden":"control"},s.a.createElement("button",{className:a?"button is-danger is-loading m-r-1":"button is-danger m-r-1",onClick:this.deleteDeposit,disabled:a},"Delete")),s.a.createElement("p",{className:0===l?"hidden":"control"},s.a.createElement("button",{className:a?"button is-loading":"button",onClick:this.clearDeposits,disabled:a},"Clear"))),s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement(we,{depositName:c,depositPrice:i,depositAmount:r,depositDuration:o,handleChange:this.handleChange,submitDeposit:this.submitDeposit})),s.a.createElement("div",{className:"column"},s.a.createElement(Me,{isLoading:t,depositList:m,bindDeposit:this.bindDeposit}))))}}]),t}(n.Component),Ye=function(e){var t=e.serviceName,a=e.serviceUnit,n=e.servicePrice,l=e.serviceExpress,c=e.handleChange,i=e.submitService;return s.a.createElement("form",{onSubmit:i},s.a.createElement("button",{className:"hidden",onClick:i}),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Nama")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field is-narrow"},s.a.createElement("input",{type:"text",className:"input",name:"serviceName",placeholder:"Kiloan, spray...",onChange:c,value:t||""})))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Satuan")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("span",{className:"select"},s.a.createElement("select",{name:"serviceUnit",onChange:c,value:a||""},s.a.createElement("option",{value:"kg"},"kg"),s.a.createElement("option",{value:"pcs"},"pcs"),s.a.createElement("option",{value:"meter"},"meter")))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Harga @")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("input",{type:"text",className:"input",name:"servicePrice",placeholder:"10.000...",onChange:c,value:n?R()(n).format("0,0"):""})),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"button is-static"},"Express + ")),s.a.createElement("p",{className:"control is-expanded"},s.a.createElement("input",{type:"text",className:"input",name:"serviceExpress",placeholder:"10.000...",onChange:c,value:l?R()(l).format("0,0"):""}))))))},Pe=function(e){var t=e.isLoading,a=e.serviceList,n=e.bindService;return s.a.createElement("div",{className:t?"":"scrollable-table-div"},s.a.createElement("table",{className:t?"table has-actions":"table is-hoverable has-actions"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Layanan"),s.a.createElement("th",null,"Satuan"),s.a.createElement("th",null,"Harga"),s.a.createElement("th",null,"Express"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,0===a.length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"5"},t?s.a.createElement(q,null):"No data available")):a.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.name),s.a.createElement("td",null,e.unit),s.a.createElement("td",null,R()(e.price).format("0,0")),s.a.createElement("td",null,R()(e.express_price).format("0,0")),s.a.createElement("td",{className:"has-text-right"},s.a.createElement("button",{className:"button is-info m-r-1",onClick:function(){return n(e)}},s.a.createElement("i",{className:"fas fa-pencil-alt"}))))}))))},Te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!1,isRequesting:!1,errorList:[],serviceId:null,serviceName:null,serviceUnit:"kg",servicePrice:null,serviceExpress:null,serviceList:[]},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.bindService=a.bindService.bind(Object(D.a)(Object(D.a)(a))),a.submitService=a.submitService.bind(Object(D.a)(Object(D.a)(a))),a.deleteService=a.deleteService.bind(Object(D.a)(Object(D.a)(a))),a.clearService=a.clearService.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchServices()}},{key:"handleChange",value:function(e){"checkbox"===e.target.type?this.setState(Object(x.a)({},e.target.name,e.target.checked)):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"bindService",value:function(e){var t=this.state,a=t.serviceId,n=t.serviceName,s=t.serviceUnit,l=t.servicePrice,c=t.serviceExpress;a=e.id,n=e.name,s=e.unit,l=e.price,c=e.express_price,this.setState({serviceId:a,serviceName:n,serviceUnit:s,servicePrice:l,serviceExpress:c})}},{key:"fetchServices",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({serviceList:[],isLoading:!0}),e.prev=1,e.next=4,T.a.get("".concat(H,"/services")).then(function(e){return e.data});case 4:t=e.sent,this.setState({serviceList:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:this.setState({isLoading:!1});case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"submitService",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,s,l,c,i,r,o,m;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isRequesting:!0}),e.prev=2,a=this.state,n=a.serviceId,s=a.serviceName,l=a.serviceUnit,c=a.servicePrice,i=a.serviceExpress,r=[],c=R()(c).value(),i=R()(i).value(),V.test(s||"")||r.push("Service harus diisi"),V.test(l||"")||r.push("Satuan harus diisi"),K.test(c||"")||r.push("Harga harus diisi"),K.test(i||"")||r.push("Express harus diisi"),!(r.length>0)){e.next=13;break}throw new Z(r);case 13:if(o={name:s,unit:l,price:c,expressPrice:i},null===n||void 0===n){e.next=20;break}return e.next=17,T.a.put("".concat(H,"/services/").concat(n),o);case 17:$("Service berhasil diubah"),e.next=23;break;case 20:return e.next=22,T.a.post("".concat(H,"/services"),o);case 22:$("Service berhasil ditambahkan");case 23:this.clearService(),this.fetchServices(),e.next=33;break;case 27:e.prev=27,e.t0=e.catch(2),m=[],e.t0.response?m.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?m.push("Request Timeout"):e.t0 instanceof Z&&(m=e.t0.errorList),this.setState({errorList:m}),G();case 33:this.setState({isRequesting:!1});case 34:case"end":return e.stop()}},e,this,[[2,27]])}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteService",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isRequesting:!0}),e.prev=2,void 0===(a=this.state.serviceId)&&0===a){e.next=10;break}return e.next=7,T.a.delete("".concat(H,"/services/").concat(a));case 7:$("Service berhasil dihapus"),e.next=11;break;case 10:throw new _("Select service first");case 11:this.fetchServices(),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(2),n=this.state.errorList,e.t0.response?n.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?n.push("Request Timeout"):e.t0 instanceof Z&&(n=e.t0.errorList),this.setState({errorList:n}),G();case 20:this.setState({isRequesting:!1});case 21:case"end":return e.stop()}},e,this,[[2,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clearService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&e.preventDefault(),this.setState({serviceId:null,serviceName:null,serviceUnit:null,servicePrice:null,serviceExpress:null})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isRequesting,n=e.errorList,l=e.serviceId,c=e.serviceName,i=e.serviceUnit,r=e.servicePrice,o=e.serviceExpress,m=e.serviceList;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee,null),s.a.createElement(_,{errorList:n}),s.a.createElement("div",{className:"flex flex-justify-end m-b-2"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:a?"button is-primary is-loading m-r-1":"button is-primary m-r-1",onClick:this.submitService,disabled:a},null===l?"Submit":"Update")),s.a.createElement("p",{className:null===l?"hidden":"control"},s.a.createElement("button",{className:a?"button is-danger is-loading m-r-1":"button is-danger m-r-1",onClick:this.deleteService,disabled:a},"Delete")),s.a.createElement("p",{className:null===l?"hidden":"control"},s.a.createElement("button",{className:a?"button is-loading":"button",onClick:this.clearService,disabled:a},"Clear"))),s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:"column is-5-widescreen"},s.a.createElement(Ye,{isRequesting:a,serviceId:l,serviceName:c,serviceUnit:i,servicePrice:r,serviceExpress:o,handleChange:this.handleChange,submitService:this.submitService,deleteService:this.deleteService,clearService:this.clearService})),s.a.createElement("div",{className:"column"},s.a.createElement(Pe,{isLoading:t,serviceList:m,bindService:this.bindService}))))}}]),t}(n.Component),Ae=function(e){var t=e.isRequesting,a=e.itemName,n=e.handleChange,l=e.submitItem;return s.a.createElement("form",{onSubmit:l},s.a.createElement("div",{className:"flex flex-justify-end m-b-2"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:t?"button is-primary is-loading m-r-1":"button is-primary m-r-1",onClick:l,disabled:t},"Submit"))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label is-normal"},s.a.createElement("label",{className:"label"},"Nama")),s.a.createElement("div",{className:"field-body"},s.a.createElement("input",{type:"text",className:"input",name:"itemName",placeholder:"Kemeja, celana...",onChange:n,value:a||""}))))},ze=function(e){var t=e.isLoading,a=e.itemList,n=e.deleteItem;return s.a.createElement("div",{className:t?"":"scrollable-table-div"},s.a.createElement("table",{className:t?"table has-actions is-scrollable-y m-t-2":"table is-hoverable has-actions is-scrollable-y m-t-2"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Item"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,0===a.length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},t?s.a.createElement(q,null):"No data available")):a.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.name),s.a.createElement("td",{className:"has-text-right"},s.a.createElement("button",{className:"button is-danger m-r-1",onClick:function(){return n(e)}},s.a.createElement("i",{className:"fas fa-times"}))))}))))},Fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!1,isRequesting:!1,errorList:[],itemName:null,itemList:[]},a.handleChange=a.handleChange.bind(Object(D.a)(Object(D.a)(a))),a.submitItem=a.submitItem.bind(Object(D.a)(Object(D.a)(a))),a.deleteItem=a.deleteItem.bind(Object(D.a)(Object(D.a)(a))),a.clearItem=a.clearItem.bind(Object(D.a)(Object(D.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchItems()}},{key:"handleChange",value:function(e){"checkbox"===e.target.type?this.setState(Object(x.a)({},e.target.name,e.target.checked)):"number"===e.target.type?this.setState(Object(x.a)({},e.target.name,parseInt(e.target.value))):this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"fetchItems",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({itemList:[],isLoading:!0}),e.prev=1,e.next=4,T.a.get("".concat(H,"/items")).then(function(e){return e.data});case 4:t=e.sent,this.setState({itemList:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:this.setState({isLoading:!1});case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"submitItem",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,s,l,c,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isRequesting:!0}),e.prev=2,a=this.state,n=a.itemId,s=a.itemName,l=[],V.test(s||"")||l.push("Item harus diisi"),!(l.length>0)){e.next=8;break}throw new Z(l);case 8:if(c={id:n,name:s},null===n||void 0===n){e.next=15;break}return e.next=12,T.a.put("".concat(H,"/items/").concat(n),c);case 12:$("Item berhasil diubah"),e.next=18;break;case 15:return e.next=17,T.a.post("".concat(H,"/items"),c);case 17:$("Item berhasil ditambahkan");case 18:this.fetchItems(),e.next=27;break;case 21:e.prev=21,e.t0=e.catch(2),i=[],e.t0.response?i.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?i.push("Request Timeout"):e.t0 instanceof Z?i=e.t0.errorList:console.log(e.t0),this.setState({errorList:i}),G();case 27:this.setState({isRequesting:!1});case 28:case"end":return e.stop()}},e,this,[[2,21]])}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isRequesting:!0}),e.prev=1,!window.confirm("Do you want to delete ".concat(t.name))){e.next=11;break}if(void 0===t.id&&0===t.id){e.next=9;break}return e.next=6,T.a.delete("".concat(H,"/items/").concat(t.id));case 6:$("Item berhasil dihapus"),e.next=10;break;case 9:throw new _("Select item first");case 10:this.fetchItems();case 11:e.next=19;break;case 13:e.prev=13,e.t0=e.catch(1),a=this.state.errorList,e.t0.response?a.push("".concat(e.t0.response.status," ").concat(e.t0.response.statusText)):e.t0.request?a.push("Request Timeout"):e.t0 instanceof Z&&(a=e.t0.errorList),this.setState({errorList:a}),G();case 19:this.setState({isRequesting:!1});case 20:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clearItem",value:function(){this.setState({itemName:""})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isRequesting,n=e.errorList,l=e.itemName,c=e.itemList;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee,null),s.a.createElement(_,{errorList:n}),s.a.createElement("div",{className:"columns is-desktop"},s.a.createElement("div",{className:"column"},s.a.createElement(Ae,{isRequesting:a,itemName:l,handleChange:this.handleChange,submitItem:this.submitItem})),s.a.createElement("div",{className:"column"},s.a.createElement(ze,{isLoading:t,itemList:c,deleteItem:this.deleteItem}))))}}]),t}(n.Component),Re=(a(29),function(e){var t=e.errorCode;return s.a.createElement("div",{className:"error-page"},401===t?s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"title is-1"},"401"),s.a.createElement("h1",null,"User not authenticated to view this page")):404===t?s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"title is-1"},"404"),s.a.createElement("h1",{className:"subtitle"},"Not found")):s.a.createElement("h1",null,"Internal server error"))}),He=function(){return s.a.createElement(Re,{errorCode:404})},qe=function(){return s.a.createElement(Re,{errorCode:401})},Be=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(u.a,null,0===this.props.login?s.a.createElement(h.a,{path:"/",component:C}):s.a.createElement(s.a.Fragment,null,s.a.createElement(y,{admin:this.props.login}),s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:"container"},s.a.createElement(p.a,null,s.a.createElement(h.a,{path:"/",exact:!0,component:Y}),s.a.createElement(h.a,{path:"/customers",exact:!0,component:Q}),s.a.createElement(h.a,{path:"/customers/add",exact:!0,component:te}),s.a.createElement(h.a,{path:"/customers/:id",component:te}),s.a.createElement(h.a,{path:"/transactions",exact:!0,component:ce}),s.a.createElement(h.a,{path:"/transactions/add",exact:!0,component:xe}),s.a.createElement(h.a,{path:"/transactions/:id",exact:!0,component:xe}),s.a.createElement(h.a,{path:"/print/transactions/:id",exact:!0,component:Oe}),s.a.createElement(h.a,{path:"/deposits",exact:!0,component:1===this.props.login?Le:qe}),s.a.createElement(h.a,{path:"/services",exact:!0,component:1===this.props.login?Te:qe}),s.a.createElement(h.a,{path:"/items",exact:!0,component:1===this.props.login?Fe:qe}),s.a.createElement(h.a,{path:"/report/transactions",exact:!0,component:1===this.props.login?je:qe}),s.a.createElement(h.a,{component:He}))))))}}]),t}(n.Component),Ue=Object(v.b)(function(e){return{login:e.login.item}})(Be);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe=a(20),Ke=a(50),Je=a(32),Ve={item:0},We=Object(Qe.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_POST":case"LOGOUT_POST":return Object(Je.a)({},e,{item:t.payload});default:return e}}}),Ze=[Ke.a],Xe=Object(Qe.e)(We,{},Object(Qe.d)(Qe.a.apply(void 0,Ze)));c.a.render(s.a.createElement(v.a,{store:Xe},s.a.createElement(Ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},29:function(e,t,a){},36:function(e,t,a){},44:function(e,t,a){},51:function(e,t,a){e.exports=a(107)},56:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},71:function(e,t,a){},92:function(e,t,a){},96:function(e,t,a){}},[[51,2,1]]]);
//# sourceMappingURL=main.bf47c971.chunk.js.map